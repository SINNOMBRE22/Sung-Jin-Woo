const a0_0x3b383c=a0_0x2416;(function(_0x131b24,_0x324726){const _0x2c7517=a0_0x2416,_0x21deb7=_0x131b24();while(!![]){try{const _0x547b90=-parseInt(_0x2c7517(0xbd))/0x1+parseInt(_0x2c7517(0xc9))/0x2+-parseInt(_0x2c7517(0xb5))/0x3*(-parseInt(_0x2c7517(0xaa))/0x4)+parseInt(_0x2c7517(0x90))/0x5+-parseInt(_0x2c7517(0xcb))/0x6*(-parseInt(_0x2c7517(0xb7))/0x7)+-parseInt(_0x2c7517(0xb4))/0x8+-parseInt(_0x2c7517(0xc1))/0x9;if(_0x547b90===_0x324726)break;else _0x21deb7['push'](_0x21deb7['shift']());}catch(_0x59d2d0){_0x21deb7['push'](_0x21deb7['shift']());}}}(a0_0x5661,0x9a762));import{dirname}from'path';import{fileURLToPath}from'url';import*as a0_0x2119b8 from'fs';import*as a0_0x183129 from'path';function a0_0x5661(){const _0x174add=['9373280lKsuOy','12KaIplO','.webp','1323448etvOiP','application/octet-stream','mime','../tmp','end','https://api.xteam.xyz/sticker/wm?','567506xLjTwF','WEBP','utf8','stickerMakerSourceType','8545239SBLmxO','save','androidAppStoreLink','webp','toString','-vf','error','addOutputOptions','2131572HuIuml','unlink','6HEllPy','stringify','from','webp:-','includes','toFormat','stdout','inputFormat','ext','reply','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','text','filter','convert','../tmp/','libwebp','ffmpeg','html','load','toUpperCase','test','6321365efTPfM','readFile','accessibilityText','default','length','wa-sticker-formatter','toBuffer','buffer','close','exports','bin','templateId','pipe','ffmpegWebp','concat','isAiSticker','join','writeFile','status','MYSTIC','scale=512:512:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','promises','jpeg','data','png','support','802188NDOIEJ','-vcodec','stdin','chat','exif','isAvatarSticker','magick','exit','randomBytes','url'];a0_0x5661=function(){return _0x174add;};return a0_0x5661();}import*as a0_0xc5b974 from'crypto';import{ffmpeg}from'./converter.js';import a0_0x193bf7 from'fluent-ffmpeg';import{spawn}from'child_process';import a0_0x401cde from'./uploadFile.js';import a0_0xa6b2a9 from'./uploadImage.js';import{fileTypeFromBuffer}from'file-type';import a0_0x5e2310 from'node-webpmux';import a0_0x1b0cd0 from'node-fetch';const __dirname=dirname(fileURLToPath(import.meta[a0_0x3b383c(0xb3)])),tmp=a0_0x183129[a0_0x3b383c(0xa0)](__dirname,a0_0x3b383c(0xba));function a0_0x2416(_0x518498,_0x2fdce6){const _0x566117=a0_0x5661();return a0_0x2416=function(_0x24167a,_0xab0e5e){_0x24167a=_0x24167a-0x82;let _0x5ce7bd=_0x566117[_0x24167a];return _0x5ce7bd;},a0_0x2416(_0x518498,_0x2fdce6);}function sticker2(_0x3fa88d,_0x3b872a){return new Promise(async(_0x4fe4f3,_0x53cb72)=>{const _0x2c5c30=a0_0x2416;try{if(_0x3b872a){const _0x19b41c=await a0_0x1b0cd0(_0x3b872a);if(_0x19b41c[_0x2c5c30(0xa2)]!==0xc8)throw await _0x19b41c[_0x2c5c30(0x86)]();_0x3fa88d=await _0x19b41c[_0x2c5c30(0x97)]();}const _0x5dad34=a0_0x183129[_0x2c5c30(0xa0)](tmp,+new Date()+'.jpeg');await a0_0x2119b8[_0x2c5c30(0xa5)][_0x2c5c30(0xa1)](_0x5dad34,_0x3fa88d);const _0x18d5bf=spawn(_0x2c5c30(0x8b),['-y','-i',_0x5dad34,_0x2c5c30(0xc6),_0x2c5c30(0xa4),'-f',_0x2c5c30(0xa8),'-']);_0x18d5bf['on']('error',_0x53cb72),_0x18d5bf['on'](_0x2c5c30(0x98),async()=>{const _0x49dfe5=_0x2c5c30;await a0_0x2119b8['promises'][_0x49dfe5(0xca)](_0x5dad34);});const _0x4d2e2e=[],[_0x8a524,..._0x15864b]=[...module[_0x2c5c30(0x99)][_0x2c5c30(0xa9)]['gm']?['gm']:module[_0x2c5c30(0x99)][_0x2c5c30(0xb0)]?['magick']:[],_0x2c5c30(0x88),'png:-',_0x2c5c30(0xce)],_0x2d65a7=spawn(_0x8a524,_0x15864b);_0x2d65a7['on'](_0x2c5c30(0xc7),_0x206d22=>conn[_0x2c5c30(0x84)](m[_0x2c5c30(0xad)],util['format'](_0x206d22),m)),_0x2d65a7[_0x2c5c30(0xd1)]['on'](_0x2c5c30(0xa7),_0x182cfa=>_0x4d2e2e['push'](_0x182cfa)),_0x18d5bf[_0x2c5c30(0xd1)][_0x2c5c30(0x9c)](_0x2d65a7[_0x2c5c30(0xac)]),_0x2d65a7['on'](_0x2c5c30(0xb1),()=>{const _0x137571=_0x2c5c30;_0x4fe4f3(Buffer[_0x137571(0x9e)](_0x4d2e2e));});}catch(_0x3f7354){_0x53cb72(_0x3f7354);}});}async function sticker3(_0x43d372,_0x523908,_0x5c6dbb,_0x3775e0){const _0x4bd1ca=a0_0x3b383c;_0x523908=_0x523908?_0x523908:await a0_0x401cde(_0x43d372);const _0x131681=await a0_0x1b0cd0(_0x4bd1ca(0xbc)+new URLSearchParams(Object['entries']({'url':_0x523908,'packname':_0x5c6dbb,'author':_0x3775e0})));return await _0x131681[_0x4bd1ca(0x97)]();}async function sticker4(_0x5695e0,_0xc2493c){const _0x1207e6=a0_0x3b383c;if(_0xc2493c){const _0x438b00=await a0_0x1b0cd0(_0xc2493c);if(_0x438b00['status']!==0xc8)throw await _0x438b00[_0x1207e6(0x86)]();_0x5695e0=await _0x438b00['buffer']();}return await ffmpeg(_0x5695e0,[_0x1207e6(0xc6),_0x1207e6(0xa4)],_0x1207e6(0xa6),'webp');}async function sticker5(_0x307d65,_0xbab219,_0x37b050,_0x5f4d18,_0x13dd5c=[''],_0x107b96={}){const _0x5592ba=a0_0x3b383c,{Sticker:_0x290bd4}=await import(_0x5592ba(0x95)),_0x39a35b={'type':_0x5592ba(0x93),'pack':_0x37b050,'author':_0x5f4d18,'categories':_0x13dd5c,..._0x107b96};return new _0x290bd4(_0x307d65?_0x307d65:_0xbab219,_0x39a35b)[_0x5592ba(0x96)]();}function sticker6(_0x33beac,_0x105179){return new Promise(async(_0xa5d522,_0x18e648)=>{const _0x2fb6d9=a0_0x2416;if(_0x105179){const _0x3b435a=await a0_0x1b0cd0(_0x105179);if(_0x3b435a['status']!==0xc8)throw await _0x3b435a[_0x2fb6d9(0x86)]();_0x33beac=await _0x3b435a['buffer']();}const _0x1cda34=await fileTypeFromBuffer(_0x33beac)||{'mime':_0x2fb6d9(0xb8),'ext':_0x2fb6d9(0x9a)};if(_0x1cda34[_0x2fb6d9(0x83)]==_0x2fb6d9(0x9a))_0x18e648(_0x33beac);const _0x9179b3=a0_0x183129[_0x2fb6d9(0xa0)](__dirname,_0x2fb6d9(0x89)+ +new Date()+'.'+_0x1cda34[_0x2fb6d9(0x83)]),_0x1f0628=a0_0x183129[_0x2fb6d9(0xa0)](_0x9179b3+_0x2fb6d9(0xb6));await a0_0x2119b8[_0x2fb6d9(0xa5)]['writeFile'](_0x9179b3,_0x33beac);const _0x37c0ff=/video/i[_0x2fb6d9(0x8f)](_0x1cda34[_0x2fb6d9(0xb9)])?a0_0x193bf7(_0x9179b3)[_0x2fb6d9(0x82)](_0x1cda34[_0x2fb6d9(0x83)]):a0_0x193bf7(_0x9179b3)['input'](_0x9179b3);_0x37c0ff['on'](_0x2fb6d9(0xc7),function(_0x481edf){const _0x1c651f=_0x2fb6d9;console[_0x1c651f(0xc7)](_0x481edf),a0_0x2119b8['promises']['unlink'](_0x9179b3),_0x18e648(_0x33beac);})['on'](_0x2fb6d9(0xbb),async function(){const _0x6a3a8b=_0x2fb6d9;a0_0x2119b8['promises']['unlink'](_0x9179b3),_0xa5d522(await a0_0x2119b8['promises'][_0x6a3a8b(0x91)](_0x1f0628));})[_0x2fb6d9(0xc8)]([_0x2fb6d9(0xab),_0x2fb6d9(0x8a),_0x2fb6d9(0xc6),_0x2fb6d9(0x85)])[_0x2fb6d9(0xd0)](_0x2fb6d9(0xc4))[_0x2fb6d9(0xc2)](_0x1f0628);});}async function addExif(_0x46d2d3,_0x1d6b96,_0x17b8de,_0x266812=[''],_0x261644){const _0x5dd686=a0_0x3b383c,_0x3ee47f=new a0_0x5e2310['Image'](),_0x4ffbf5=_0x5dd686(0xa3)+a0_0xc5b974[_0x5dd686(0xb2)](0xc)[_0x5dd686(0xc5)]('hex')[_0x5dd686(0x8e)](),_0x1e7575={'sticker-pack-id':_0x261644['packId']?_0x261644['packId']:''+_0x4ffbf5,'sticker-pack-name':_0x1d6b96?_0x1d6b96:undefined,'sticker-pack-publisher':_0x17b8de?_0x17b8de:undefined,'android-app-store-link':_0x261644[_0x5dd686(0xc3)]?_0x261644[_0x5dd686(0xc3)]:undefined,'ios-app-store-link':_0x261644['iosAppStoreLink']?_0x261644['iosAppStoreLink']:undefined,'is-ai-sticker':_0x261644[_0x5dd686(0x9f)]?0x1:undefined,'is-first-party-sticker':_0x261644['isFirstPartySticker']?0x1:undefined,'accessibility-text':_0x261644['accessibilityText']?_0x261644[_0x5dd686(0x92)]:undefined,'avatar-sticker-template-id':_0x261644[_0x5dd686(0x9b)]?_0x261644[_0x5dd686(0x9b)]:undefined,'is-avatar-sticker':_0x261644[_0x5dd686(0xaf)]?0x1:undefined,'sticker-maker-source-type':_0x261644['stickerMakerSourceType']?_0x261644[_0x5dd686(0xc0)]:undefined,'emojis':_0x266812?_0x266812:undefined},_0x214c47=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x2f154a=Buffer[_0x5dd686(0xcd)](JSON[_0x5dd686(0xcc)](_0x1e7575),_0x5dd686(0xbf)),_0x411388=Buffer[_0x5dd686(0x9e)]([_0x214c47,_0x2f154a]);return _0x411388['writeUIntLE'](_0x2f154a[_0x5dd686(0x94)],0xe,0x4),await _0x3ee47f[_0x5dd686(0x8d)](_0x46d2d3),_0x3ee47f[_0x5dd686(0xae)]=_0x411388,await _0x3ee47f[_0x5dd686(0xc2)](null);}async function sticker(_0x103501,_0x4ab88c,..._0xf9e5ba){const _0x54c6c0=a0_0x3b383c;let _0x14dd74,_0x2b1c64;for(const _0x544950 of[sticker3,global[_0x54c6c0(0xa9)]['ffmpeg']&&sticker6,sticker5,global[_0x54c6c0(0xa9)][_0x54c6c0(0x8b)]&&global[_0x54c6c0(0xa9)][_0x54c6c0(0x9d)]&&sticker4,global[_0x54c6c0(0xa9)][_0x54c6c0(0x8b)]&&(global[_0x54c6c0(0xa9)][_0x54c6c0(0x88)]||global[_0x54c6c0(0xa9)][_0x54c6c0(0xb0)]||global[_0x54c6c0(0xa9)]['gm'])&&sticker2][_0x54c6c0(0x87)](_0x425c22=>_0x425c22)){try{_0x2b1c64=await _0x544950(_0x103501,_0x4ab88c,..._0xf9e5ba);if(_0x2b1c64[_0x54c6c0(0xcf)](_0x54c6c0(0x8c)))continue;if(_0x2b1c64['includes'](_0x54c6c0(0xbe)))try{return await addExif(_0x2b1c64,..._0xf9e5ba);}catch(_0x343289){return console[_0x54c6c0(0xc7)](_0x343289),_0x2b1c64;}throw _0x2b1c64[_0x54c6c0(0xc5)]();}catch(_0x5d3160){_0x14dd74=_0x5d3160;continue;}}return console['error'](_0x14dd74),_0x14dd74;}const support={'ffmpeg':!![],'ffprobe':!![],'ffmpegWebp':!![],'convert':!![],'magick':![],'gm':![],'find':![]};export{sticker,sticker2,sticker3,sticker4,sticker6,addExif,support};