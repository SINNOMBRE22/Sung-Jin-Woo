import yts from 'yt-search';

let handler = async (m, { conn, usedPrefix, text, args, command }) => { if (!text) return conn.reply(m.chat, âš ï¸ Escribe el nombre de un video o canal de YouTube., m);

try {
    let result = await yts(text);
    let ytres = result.videos;
    let teskd = `ğŸ” BÃºsqueda de *${text}*`;

    let listSections = [];
    for (let v of ytres) {
        listSections.push({
            title: `ğŸ“Œ Resultados`,
            rows: [
                { header: 'ğŸµ Audio', description: `${v.title} | ${v.timestamp}`, id: `${usedPrefix}ytmp3 ${v.url}` },
                { header: 'ğŸ¬ Video', description: `${v.title} | ${v.timestamp}`, id: `${usedPrefix}ytmp4 ${v.url}` },
                { header: 'ğŸ“„ Audio DOC', description: `${v.title} | ${v.timestamp}`, id: `${usedPrefix}ytmp3doc ${v.url}` },
                { header: 'ğŸ“„ Video DOC', description: `${v.title} | ${v.timestamp}`, id: `${usedPrefix}ytmp4doc ${v.url}` }
            ]
        });
    }

    await conn.sendList(m.chat, `ğŸ“‹ *Resultados*`, `ğŸ” BÃºsqueda de: ${text}`, `ğŸ“Œ Buscar`, listSections, m);
} catch (e) {
    await conn.sendButton(m.chat, `âŒ OcurriÃ³ un error.`, `Por favor, reporta este problema con: ${usedPrefix + command}`, null, [['ğŸ“© Reportar', `#reporte Error en *${usedPrefix + command}*`]], m);
    console.error(e);
}

};

handler.help = ['playlist']; 
handler.tags = ['dl']; 
handler.command = /^playlist|ytbuscar|yts(earch)?$/i;

export default handler;

