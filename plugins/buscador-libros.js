const a0_0x19068b=a0_0x3970;(function(_0x3d6caa,_0x7f59eb){const _0x50a227=a0_0x3970,_0x4b6cbc=_0x3d6caa();while(!![]){try{const _0x9d039c=parseInt(_0x50a227(0x13d))/0x1+-parseInt(_0x50a227(0x127))/0x2+-parseInt(_0x50a227(0x140))/0x3+parseInt(_0x50a227(0x121))/0x4+-parseInt(_0x50a227(0x137))/0x5*(parseInt(_0x50a227(0x118))/0x6)+-parseInt(_0x50a227(0x132))/0x7*(parseInt(_0x50a227(0x130))/0x8)+parseInt(_0x50a227(0x133))/0x9;if(_0x9d039c===_0x7f59eb)break;else _0x4b6cbc['push'](_0x4b6cbc['shift']());}catch(_0x13262e){_0x4b6cbc['push'](_0x4b6cbc['shift']());}}}(a0_0x1136,0xc0ddf));import a0_0x114b85 from'cheerio';let handler=async(_0x33ce17,{text:_0x1711fd,conn:_0x21f59b})=>{const _0x16dc9e=a0_0x3970;if(!_0x1711fd)return _0x33ce17[_0x16dc9e(0x12f)](_0x16dc9e(0x11e));let _0x168af4=_0x1711fd,_0xfa4095='https://www.gutenberg.org/ebooks/search/?query='+encodeURIComponent(_0x168af4);try{let _0x7da214=await fetch(_0xfa4095,{'headers':{'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)'}});if(!_0x7da214['ok'])return _0x33ce17[_0x16dc9e(0x12f)](_0x16dc9e(0x13f)+_0x7da214[_0x16dc9e(0x11d)]);let _0xaa5f70=await _0x7da214['text'](),_0x4f08e4=a0_0x114b85[_0x16dc9e(0x138)](_0xaa5f70),_0x38652c=[];_0x4f08e4(_0x16dc9e(0x128))[_0x16dc9e(0x12b)]((_0x1e4d23,_0x493f97)=>{const _0x1638da=_0x16dc9e;let _0xc572fa=_0x4f08e4(_0x493f97)[_0x1638da(0x135)](_0x1638da(0x124))[_0x1638da(0x11b)]()['trim'](),_0x28ad15=_0x4f08e4(_0x493f97)[_0x1638da(0x135)]('span.subtitle')[_0x1638da(0x11b)]()[_0x1638da(0x11c)](),_0x3205cf=_0x1638da(0x12e)+_0x4f08e4(_0x493f97)['find']('a')[_0x1638da(0x123)](_0x1638da(0x144));_0x38652c[_0x1638da(0x120)]({'title':_0xc572fa,'author':_0x28ad15,'link':_0x3205cf});});if(_0x38652c[_0x16dc9e(0x131)]===0x0)return _0x33ce17[_0x16dc9e(0x12f)](_0x16dc9e(0x136));let _0x4b6180=_0x38652c[0x0];_0x33ce17[_0x16dc9e(0x12f)](_0x16dc9e(0x126)+_0x4b6180[_0x16dc9e(0x12a)]+(_0x4b6180[_0x16dc9e(0x11f)]?_0x16dc9e(0x13a)+_0x4b6180['author']:'')+_0x16dc9e(0x13c));let _0x35f442=await fetch(_0x4b6180[_0x16dc9e(0x139)],{'headers':{'User-Agent':_0x16dc9e(0x143)}});if(!_0x35f442['ok'])return _0x33ce17[_0x16dc9e(0x12f)](_0x16dc9e(0x119)+_0x35f442['statusText']);let _0xd538df=await _0x35f442[_0x16dc9e(0x11b)](),_0x522e7b=a0_0x114b85[_0x16dc9e(0x138)](_0xd538df),_0x30c9e0=_0x522e7b(_0x16dc9e(0x125))[_0x16dc9e(0x123)](_0x16dc9e(0x144));!_0x30c9e0&&(_0x30c9e0=_0x522e7b(_0x16dc9e(0x11a))[_0x16dc9e(0x123)]('href'));if(!_0x30c9e0)return _0x33ce17[_0x16dc9e(0x12f)]('No\x20se\x20encontró\x20una\x20versión\x20en\x20texto\x20plano\x20para\x20descargar.');_0x30c9e0[_0x16dc9e(0x13b)]('/')&&(_0x30c9e0=_0x16dc9e(0x12e)+_0x30c9e0);let _0x2023f3=await fetch(_0x30c9e0,{'headers':{'User-Agent':_0x16dc9e(0x143)}});if(!_0x2023f3['ok'])return _0x33ce17[_0x16dc9e(0x12f)]('Error\x20al\x20descargar\x20el\x20libro:\x20'+_0x2023f3[_0x16dc9e(0x11d)]);let _0x1c442a=await _0x2023f3[_0x16dc9e(0x122)](),_0x1d24bb=Buffer[_0x16dc9e(0x117)](_0x1c442a);await _0x21f59b[_0x16dc9e(0x141)](_0x33ce17['chat'],_0x1d24bb,_0x4b6180['title']+_0x16dc9e(0x134),_0x16dc9e(0x13e)+_0x4b6180[_0x16dc9e(0x12a)],_0x33ce17);}catch(_0x21d486){console[_0x16dc9e(0x129)](_0x21d486),_0x33ce17[_0x16dc9e(0x12f)]('Ocurrió\x20un\x20error\x20al\x20buscar\x20o\x20descargar\x20el\x20libro.\x20Intenta\x20nuevamente.');}};handler[a0_0x19068b(0x12d)]=['libro\x20<título>'],handler[a0_0x19068b(0x12c)]=[a0_0x19068b(0x142)],handler['command']=/^libro$/i;function a0_0x1136(){const _0x34c800=['text','trim','statusText','Por\x20favor,\x20ingresa\x20el\x20título\x20o\x20tema\x20del\x20libro\x20a\x20buscar.','author','push','1350280iPuPmH','arrayBuffer','attr','span.title','a[type=\x22text/plain\x22]','Encontrado:\x20','1141966JppEub','li.booklink','error','title','each','tags','help','https://www.gutenberg.org','reply','136QJWGcm','length','490357Hnmpzq','33213285KlPPKB','.txt','find','No\x20se\x20encontraron\x20libros\x20para\x20esa\x20búsqueda.','6495ggEpKt','load','link','\x20-\x20','startsWith','\x0aDescargando...','401709lUDbPy','Aquí\x20tienes\x20el\x20libro:\x20','Error\x20en\x20la\x20búsqueda:\x20','4444848IBlDcQ','sendFile','buscador','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)','href','from','1830ESWEai','Error\x20al\x20obtener\x20la\x20página\x20del\x20libro:\x20','a[href$=\x22.txt\x22]'];a0_0x1136=function(){return _0x34c800;};return a0_0x1136();}function a0_0x3970(_0x56f188,_0x17eaa7){const _0x113634=a0_0x1136();return a0_0x3970=function(_0x39708c,_0x431bc0){_0x39708c=_0x39708c-0x117;let _0x255e6f=_0x113634[_0x39708c];return _0x255e6f;},a0_0x3970(_0x56f188,_0x17eaa7);}export default handler;