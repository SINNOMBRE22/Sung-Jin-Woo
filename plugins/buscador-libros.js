const a0_0x5ec918=a0_0x50e0;function a0_0x50e0(_0x512949,_0x177d96){const _0x241ebc=a0_0x241e();return a0_0x50e0=function(_0x50e0c1,_0xf952e0){_0x50e0c1=_0x50e0c1-0xf6;let _0x3c0d86=_0x241ebc[_0x50e0c1];return _0x3c0d86;},a0_0x50e0(_0x512949,_0x177d96);}(function(_0x5123df,_0x593d05){const _0x129c21=a0_0x50e0,_0x31f570=_0x5123df();while(!![]){try{const _0x3e4019=-parseInt(_0x129c21(0x120))/0x1+-parseInt(_0x129c21(0x125))/0x2*(-parseInt(_0x129c21(0xf7))/0x3)+-parseInt(_0x129c21(0x103))/0x4*(-parseInt(_0x129c21(0xf8))/0x5)+-parseInt(_0x129c21(0xfe))/0x6*(parseInt(_0x129c21(0x117))/0x7)+parseInt(_0x129c21(0x10d))/0x8*(parseInt(_0x129c21(0xf9))/0x9)+-parseInt(_0x129c21(0xfb))/0xa*(-parseInt(_0x129c21(0x121))/0xb)+parseInt(_0x129c21(0x110))/0xc*(-parseInt(_0x129c21(0x114))/0xd);if(_0x3e4019===_0x593d05)break;else _0x31f570['push'](_0x31f570['shift']());}catch(_0x3eb1c6){_0x31f570['push'](_0x31f570['shift']());}}}(a0_0x241e,0x93cf0));import a0_0x3aa1c9 from'cheerio';let handler=async(_0x2cfcc5,{text:_0x4be0e3,conn:_0x2bb785})=>{const _0x425575=a0_0x50e0;if(!_0x4be0e3)return _0x2cfcc5[_0x425575(0x10e)](_0x425575(0x11a));let _0xc459df=_0x4be0e3,_0x9f3606='https://www.gutenberg.org/ebooks/search/?query='+encodeURIComponent(_0xc459df);try{let _0x3f3d7a=await fetch(_0x9f3606,{'headers':{'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)'}});if(!_0x3f3d7a['ok'])return _0x2cfcc5[_0x425575(0x10e)](_0x425575(0x11c)+_0x3f3d7a[_0x425575(0x115)]);let _0x14784e=await _0x3f3d7a[_0x425575(0x100)](),_0xc2d83b=a0_0x3aa1c9[_0x425575(0x101)](_0x14784e),_0x4d6e91=[];_0xc2d83b(_0x425575(0x122))[_0x425575(0x108)]((_0x12901c,_0x31bb89)=>{const _0x43b91f=_0x425575;let _0x3aa27e=_0xc2d83b(_0x31bb89)[_0x43b91f(0xfc)](_0x43b91f(0x10c))[_0x43b91f(0x100)]()[_0x43b91f(0x11f)](),_0x5484b0=_0xc2d83b(_0x31bb89)[_0x43b91f(0xfc)]('span.subtitle')[_0x43b91f(0x100)]()[_0x43b91f(0x11f)](),_0x36e976=_0x43b91f(0x11d)+_0xc2d83b(_0x31bb89)[_0x43b91f(0xfc)]('a')[_0x43b91f(0xfa)]('href');_0x4d6e91[_0x43b91f(0xfd)]({'title':_0x3aa27e,'author':_0x5484b0,'link':_0x36e976});});if(_0x4d6e91[_0x425575(0x10a)]===0x0)return _0x2cfcc5[_0x425575(0x10e)]('No\x20se\x20encontraron\x20libros\x20para\x20esa\x20búsqueda.');let _0x174125=_0x4d6e91[0x0];_0x2cfcc5[_0x425575(0x10e)](_0x425575(0x111)+_0x174125[_0x425575(0x124)]+(_0x174125[_0x425575(0x107)]?_0x425575(0x102)+_0x174125[_0x425575(0x107)]:'')+_0x425575(0xff));let _0x17ae0d=await fetch(_0x174125['link'],{'headers':{'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)'}});if(!_0x17ae0d['ok'])return _0x2cfcc5['reply'](_0x425575(0x104)+_0x17ae0d[_0x425575(0x115)]);let _0x51b548=await _0x17ae0d[_0x425575(0x100)](),_0x128e37=a0_0x3aa1c9[_0x425575(0x101)](_0x51b548),_0x6f00f2=_0x128e37(_0x425575(0x113))[_0x425575(0xfa)](_0x425575(0x116));!_0x6f00f2&&(_0x6f00f2=_0x128e37(_0x425575(0xf6))[_0x425575(0xfa)](_0x425575(0x116)));if(!_0x6f00f2)return _0x2cfcc5[_0x425575(0x10e)](_0x425575(0x105));_0x6f00f2['startsWith']('/')&&(_0x6f00f2=_0x425575(0x11d)+_0x6f00f2);let _0x4ae8a7=await fetch(_0x6f00f2,{'headers':{'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)'}});if(!_0x4ae8a7['ok'])return _0x2cfcc5['reply']('Error\x20al\x20descargar\x20el\x20libro:\x20'+_0x4ae8a7['statusText']);let _0xf2a009=await _0x4ae8a7[_0x425575(0x112)](),_0x4d95e7=Buffer[_0x425575(0x10b)](_0xf2a009);await _0x2bb785['sendFile'](_0x2cfcc5[_0x425575(0x10f)],_0x4d95e7,_0x174125[_0x425575(0x124)]+_0x425575(0x11b),_0x425575(0x123)+_0x174125[_0x425575(0x124)],_0x2cfcc5);}catch(_0x398f8a){console[_0x425575(0x118)](_0x398f8a),_0x2cfcc5[_0x425575(0x10e)](_0x425575(0x119));}};handler[a0_0x5ec918(0x11e)]=[a0_0x5ec918(0x106)],handler[a0_0x5ec918(0x109)]=['buscador'],handler['command']=/^libro$/i;function a0_0x241e(){const _0x413293=['Aquí\x20tienes\x20el\x20libro:\x20','title','34150JDHmjs','a[href$=\x22.txt\x22]','45zhrvNk','20VVatFd','101178aNpUND','attr','1962020kHvdZo','find','push','5604glTJMx','\x0aDescargando...','text','load','\x20-\x20','239028nvttWG','Error\x20al\x20obtener\x20la\x20página\x20del\x20libro:\x20','No\x20se\x20encontró\x20una\x20versión\x20en\x20texto\x20plano\x20para\x20descargar.','libro\x20<título>','author','each','tags','length','from','span.title','608wxiMAk','reply','chat','510852PgnYsZ','Encontrado:\x20','arrayBuffer','a[type=\x22text/plain\x22]','247sBpbuu','statusText','href','6615UxoIJF','error','Ocurrió\x20un\x20error\x20al\x20buscar\x20o\x20descargar\x20el\x20libro.\x20Intenta\x20nuevamente.','Por\x20favor,\x20ingresa\x20el\x20título\x20o\x20tema\x20del\x20libro\x20a\x20buscar.','.txt','Error\x20en\x20la\x20búsqueda:\x20','https://www.gutenberg.org','help','trim','229854KvZcuN','66bqjbVB','li.booklink'];a0_0x241e=function(){return _0x413293;};return a0_0x241e();}export default handler;