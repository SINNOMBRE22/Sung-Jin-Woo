const a0_0x34f8b4=a0_0xc5f0;(function(_0x3b1eab,_0x24b4b3){const _0x431a17=a0_0xc5f0,_0x2802bd=_0x3b1eab();while(!![]){try{const _0x2b8772=parseInt(_0x431a17(0x152))/0x1+parseInt(_0x431a17(0x157))/0x2+parseInt(_0x431a17(0x161))/0x3+-parseInt(_0x431a17(0x167))/0x4*(parseInt(_0x431a17(0x16b))/0x5)+parseInt(_0x431a17(0x14a))/0x6*(parseInt(_0x431a17(0x150))/0x7)+-parseInt(_0x431a17(0x16d))/0x8*(-parseInt(_0x431a17(0x168))/0x9)+parseInt(_0x431a17(0x15d))/0xa*(-parseInt(_0x431a17(0x14f))/0xb);if(_0x2b8772===_0x24b4b3)break;else _0x2802bd['push'](_0x2802bd['shift']());}catch(_0x17d5a1){_0x2802bd['push'](_0x2802bd['shift']());}}}(a0_0x3695,0xd61f1));function a0_0x3695(){const _0x43ae4c=['POST','[modoia]\x20Llamando\x20a\x20OpenAI...','split','content','trim','sendMessage','jid','fromMe','18222FqOkOy','log','stringify','error','No\x20pude\x20responder.','11OhYQaN','2107lgNmTH','message','469834dHzTsQ','[modoia]\x20Mensaje\x20entrante:','choices','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','isGroup','2807650eXNJCv','[modoia]\x20Error\x20en\x20IA\x20➟','modoia','Bearer\x20','text','parse','17336300guxxvS','chat','https://api.openai.com/v1/chat/completions','statusText','1084602lHtzcU','\x0aTu\x20nombre\x20es\x20Sung-Jin-Woo.\x20Eres\x20un\x20asistente\x20inteligente\x20creado\x20por\x20el\x20usuario\x20conocido\x20como\x20SinNombre.\x0a\x0aResponde\x20en\x20texto\x20plano,\x20sin\x20símbolos\x20complejos,\x20sin\x20LaTeX,\x20sin\x20\x5c\x20o\x20^.\x20Para\x20exponentes\x20usa\x20caracteres\x20como\x20²\x20o\x20³.\x20Para\x20fracciones\x20usa\x20\x221/2\x22,\x20\x223/4\x22,\x20etc.\x0a\x0aCuando\x20te\x20pregunten\x20matemáticas,\x20responde\x20paso\x20a\x20paso,\x20numerado\x20así:\x0a\x0a1.\x20x²\x20=\x2016\x0a2.\x20x\x20=\x20±√16\x0a3.\x20x\x20=\x20±4\x0a\x0aNunca\x20digas\x20que\x20eres\x20un\x20modelo\x20de\x20lenguaje,\x20un\x20chatbot,\x20ni\x20menciones\x20a\x20ChatGPT,\x20OpenAI\x20ni\x20a\x20tu\x20creador.','HTTP\x20','status','gpt-3.5-turbo','user','100ZvkXXd','249759eGMgNl','settings','system','196535EnqPQI','data','128yTkOFG'];a0_0x3695=function(){return _0x43ae4c;};return a0_0x3695();}import a0_0x32cf92 from'node-fetch';const OPENAI_API_KEY=a0_0x34f8b4(0x155),OPENAI_URL=a0_0x34f8b4(0x15f),MODEL_NAME=a0_0x34f8b4(0x165),handler=_0x46346c=>_0x46346c;function a0_0xc5f0(_0x3b7a12,_0x2fe4ce){const _0x36957c=a0_0x3695();return a0_0xc5f0=function(_0xc5f00b,_0x3a2ca0){_0xc5f00b=_0xc5f00b-0x145;let _0x464201=_0x36957c[_0xc5f00b];return _0x464201;},a0_0xc5f0(_0x3b7a12,_0x2fe4ce);}handler['before']=async function(_0x92dd08,{conn:_0x463b06}){const _0x4be249=a0_0x34f8b4;if(_0x92dd08[_0x4be249(0x156)]||_0x92dd08[_0x4be249(0x149)]||!_0x92dd08[_0x4be249(0x15b)]?.[_0x4be249(0x146)]())return!![];global['db'][_0x4be249(0x16c)]['settings']=global['db']['data'][_0x4be249(0x169)]||{};const _0xd14f42=global['db']['data'][_0x4be249(0x169)][_0x463b06[_0x4be249(0x166)][_0x4be249(0x148)]]||{};if(!_0xd14f42[_0x4be249(0x159)])return!![];console['log'](_0x4be249(0x153),_0x92dd08[_0x4be249(0x15e)],_0x92dd08[_0x4be249(0x15b)]);try{const _0x25009b=_0x4be249(0x162)[_0x4be249(0x146)]();console[_0x4be249(0x14b)](_0x4be249(0x16f));const _0x40d356=await callOpenAI([{'role':_0x4be249(0x16a),'content':_0x25009b},{'role':_0x4be249(0x166),'content':_0x92dd08['text'][_0x4be249(0x146)]()}]);console[_0x4be249(0x14b)]('[modoia]\x20Respuesta\x20IA:',_0x40d356),await _0x463b06[_0x4be249(0x147)](_0x92dd08[_0x4be249(0x15e)],{'text':_0x40d356});}catch(_0x68a713){console[_0x4be249(0x14d)](_0x4be249(0x158),_0x68a713);let _0xe95d3a=_0x68a713['message'];try{const _0x359bc4=JSON[_0x4be249(0x15c)](_0x68a713[_0x4be249(0x151)][_0x4be249(0x170)](':')['slice'](-0x1)[0x0]);_0xe95d3a=_0x359bc4[_0x4be249(0x14d)]?.[_0x4be249(0x151)]||_0xe95d3a;}catch{}await _0x463b06[_0x4be249(0x147)](_0x92dd08[_0x4be249(0x15e)],{'text':'❌\x20Error\x20IA:\x20'+_0xe95d3a});}return![];};async function callOpenAI(_0x27e5cb){const _0x2f9874=a0_0x34f8b4,_0xad7bc1=await a0_0x32cf92(OPENAI_URL,{'method':_0x2f9874(0x16e),'headers':{'Authorization':_0x2f9874(0x15a)+OPENAI_API_KEY,'Content-Type':'application/json'},'body':JSON[_0x2f9874(0x14c)]({'model':MODEL_NAME,'messages':_0x27e5cb})}),_0x152873=await _0xad7bc1[_0x2f9874(0x15b)]();if(!_0xad7bc1['ok'])throw new Error(_0x2f9874(0x163)+_0xad7bc1[_0x2f9874(0x164)]+'\x20'+_0xad7bc1[_0x2f9874(0x160)]+':\x20'+_0x152873);let _0x23b1c9;try{_0x23b1c9=JSON[_0x2f9874(0x15c)](_0x152873);}catch{throw new Error('JSON\x20parse\x20error:\x20'+_0x152873);}return _0x23b1c9[_0x2f9874(0x154)]?.[0x0]?.[_0x2f9874(0x151)]?.[_0x2f9874(0x145)][_0x2f9874(0x146)]()||_0x2f9874(0x14e);}export default handler;