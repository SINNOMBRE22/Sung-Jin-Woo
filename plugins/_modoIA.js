function a0_0x4dad(){const _0x3ee5c6=['data','1178633wnxWTg','before','POST','2639552ZNgXMk','stringify','jid','test','error','message','3715595SzlOFY','No\x20pude\x20responder.','prefix','application/json','choices','1713018mwcEYT','trim','modoia','settings','18kEHrSO','3454156FENdfN','6bJdQuR','3783731wpAhZT','fromMe','user','text','reply','2379156WXFqHc','content'];a0_0x4dad=function(){return _0x3ee5c6;};return a0_0x4dad();}const a0_0xd6311c=a0_0x1df7;function a0_0x1df7(_0x2134d2,_0x48b68f){const _0x4dad44=a0_0x4dad();return a0_0x1df7=function(_0x1df7e2,_0x3bd4bd){_0x1df7e2=_0x1df7e2-0x11e;let _0x58cc63=_0x4dad44[_0x1df7e2];return _0x58cc63;},a0_0x1df7(_0x2134d2,_0x48b68f);}(function(_0x3058ca,_0x1d7a3a){const _0x518c81=a0_0x1df7,_0x54cb14=_0x3058ca();while(!![]){try{const _0x14bc3f=parseInt(_0x518c81(0x137))/0x1+-parseInt(_0x518c81(0x128))/0x2+-parseInt(_0x518c81(0x134))/0x3+-parseInt(_0x518c81(0x12d))/0x4+-parseInt(_0x518c81(0x123))/0x5*(-parseInt(_0x518c81(0x12e))/0x6)+parseInt(_0x518c81(0x12f))/0x7+parseInt(_0x518c81(0x13a))/0x8*(parseInt(_0x518c81(0x12c))/0x9);if(_0x14bc3f===_0x1d7a3a)break;else _0x54cb14['push'](_0x54cb14['shift']());}catch(_0x56238d){_0x54cb14['push'](_0x54cb14['shift']());}}}(a0_0x4dad,0x94b31));import a0_0xe4f061 from'node-fetch';const OPENROUTER_API_KEY='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',OPENROUTER_URL='https://openrouter.ai/api/v1/chat/completions',MODEL_NAME='openai/gpt-3.5-turbo',handler=_0x528472=>_0x528472;handler[a0_0xd6311c(0x138)]=async function(_0x44ee1b,{conn:_0xe03310}){const _0x1ee293=a0_0xd6311c;let _0x52e270=![];const _0x473f7d=global[_0x1ee293(0x125)];if(_0x473f7d[_0x1ee293(0x120)](_0x44ee1b[_0x1ee293(0x132)]))_0x52e270=!![];global['db'][_0x1ee293(0x136)][_0x1ee293(0x12b)]=global['db'][_0x1ee293(0x136)][_0x1ee293(0x12b)]||{};const _0xf94bf5=global['db']['data'][_0x1ee293(0x12b)][_0xe03310[_0x1ee293(0x131)][_0x1ee293(0x11f)]]||{};if(_0xf94bf5[_0x1ee293(0x12a)]&&!_0x44ee1b['isGroup']&&!_0x52e270&&!_0x44ee1b[_0x1ee293(0x130)]&&_0x44ee1b[_0x1ee293(0x132)]&&_0x44ee1b[_0x1ee293(0x132)][_0x1ee293(0x129)]()!==''){if(/false|disnable|(turn)?off|0/i[_0x1ee293(0x120)](_0x44ee1b['text']))return!![];try{const _0x4c633a='Eres\x20un\x20asistente\x20de\x20texto\x20plano.\x20No\x20uses\x20LaTeX\x20ni\x20,\x20ni\x20símbolos\x20como\x20\x5c\x5c,\x20^\x20o\x20*.\x0aPara\x20exponentes,\x20usa\x20caracteres\x20superscritos\x20(²,\x20³,\x20etc).\x0aPara\x20fracciones,\x20utiliza\x20el\x20formato\x20\x22numerador/denominador\x22\x20(por\x20ejemplo,\x20\x221/2\x22\x20o\x20\x223/4\x22).\x0aCuando\x20el\x20usuario\x20haga\x20una\x20pregunta\x20de\x20matemáticas\x20o\x20álgebra,\x20responde\x20paso\x20a\x20paso\x20con\x20texto\x20numerado,\x20como\x20en\x20este\x20ejemplo:\x0a\x0a1.\x20x²\x20=\x2016\x0a2.\x20x\x20=\x20±√16\x0a3.\x20x\x20=\x20±4\x0a\x0aEvita\x20cualquier\x20otro\x20símbolo\x20o\x20formato\x20complicado.\x20Solo\x20texto\x20plano\x20y\x20claros\x20pasos\x20numerados.',_0x3d433f=await callIA([{'role':'system','content':_0x4c633a},{'role':'user','content':_0x44ee1b[_0x1ee293(0x132)]}]);await _0x44ee1b[_0x1ee293(0x133)](_0x3d433f);}catch(_0x1b645f){console[_0x1ee293(0x121)](_0x1b645f),await _0x44ee1b[_0x1ee293(0x133)]('❌\x20Ocurrió\x20un\x20error\x20al\x20procesar\x20la\x20IA.');}return![];}return!![];};async function callIA(_0x1c2be4){const _0x13bed2=a0_0xd6311c,_0x3d6977=await a0_0xe4f061(OPENROUTER_URL,{'method':_0x13bed2(0x139),'headers':{'Authorization':'Bearer\x20'+OPENROUTER_API_KEY,'Content-Type':_0x13bed2(0x126)},'body':JSON[_0x13bed2(0x11e)]({'model':MODEL_NAME,'messages':_0x1c2be4})}),_0x5ddad6=await _0x3d6977['json']();return _0x5ddad6[_0x13bed2(0x127)]?.[0x0]?.[_0x13bed2(0x122)]?.[_0x13bed2(0x135)]||_0x13bed2(0x124);}export default handler;