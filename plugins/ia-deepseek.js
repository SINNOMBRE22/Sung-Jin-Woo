const a0_0x593a5c=a0_0x4976;(function(_0x36bc0c,_0x81f986){const _0x1751f3=a0_0x4976,_0x890db5=_0x36bc0c();while(!![]){try{const _0xaeedac=parseInt(_0x1751f3(0x172))/0x1*(parseInt(_0x1751f3(0x130))/0x2)+-parseInt(_0x1751f3(0x136))/0x3*(-parseInt(_0x1751f3(0x152))/0x4)+parseInt(_0x1751f3(0x184))/0x5*(-parseInt(_0x1751f3(0x15a))/0x6)+-parseInt(_0x1751f3(0x145))/0x7*(parseInt(_0x1751f3(0x15e))/0x8)+-parseInt(_0x1751f3(0x154))/0x9*(-parseInt(_0x1751f3(0x17c))/0xa)+-parseInt(_0x1751f3(0x163))/0xb+parseInt(_0x1751f3(0x176))/0xc*(parseInt(_0x1751f3(0x14f))/0xd);if(_0xaeedac===_0x81f986)break;else _0x890db5['push'](_0x890db5['shift']());}catch(_0x56f736){_0x890db5['push'](_0x890db5['shift']());}}}(a0_0x48c0,0x7bc2e));import a0_0x4a6751 from'node-fetch';import a0_0x3201bd from'pdfkit';function a0_0x4976(_0x4f9fbf,_0x3349b4){const _0x48c009=a0_0x48c0();return a0_0x4976=function(_0x4976f7,_0x171ebb){_0x4976f7=_0x4976f7-0x122;let _0x579d38=_0x48c009[_0x4976f7];return _0x579d38;},a0_0x4976(_0x4f9fbf,_0x3349b4);}import a0_0x28e54c from'pptxgenjs';import{createWriteStream}from'fs';import{promisify}from'util';import{pipeline}from'stream';const API_KEY=a0_0x593a5c(0x12a),API_URL=a0_0x593a5c(0x12c),CONFIG={'defaultModel':a0_0x593a5c(0x16d),'maxHistory':0x5,'maxTokens':0x5dc,'pdf':{'margins':0x32,'headerHeight':0x1e,'footerHeight':0x1e,'styles':{'title':{'fontSize':0x12,'bold':!![]},'body':{'fontSize':0xc,'lineGap':0x8}}},'pptx':{'slideWidth':13.33,'slideHeight':7.5,'titleStyle':{'fontSize':0x18,'bold':!![],'color':'363636'},'bodyStyle':{'fontSize':0x10,'bullet':!![],'lineSpacing':0x18}}},chatHistory=new Map();async function callIA(_0x362582,_0x1890c0={}){const _0x58e83c=a0_0x593a5c,_0x70301e=await a0_0x4a6751(API_URL,{'method':_0x58e83c(0x157),'headers':{'Authorization':_0x58e83c(0x15d)+API_KEY,'Content-Type':_0x58e83c(0x16c),'HTTP-Referer':_0x58e83c(0x14c),'X-Title':_0x58e83c(0x149)},'body':JSON[_0x58e83c(0x17b)]({'model':_0x1890c0[_0x58e83c(0x179)]||CONFIG[_0x58e83c(0x151)],'messages':_0x362582,'temperature':_0x1890c0[_0x58e83c(0x148)]||0.7,'max_tokens':_0x1890c0['max_tokens']||CONFIG[_0x58e83c(0x146)],'top_p':_0x1890c0['top_p']||0x1})});if(!_0x70301e['ok']){const _0x365f28=await _0x70301e[_0x58e83c(0x142)]()[_0x58e83c(0x143)](()=>({}));throw new Error(_0x58e83c(0x16f)+(_0x365f28['error']?.[_0x58e83c(0x161)]||_0x70301e[_0x58e83c(0x17e)]));}const _0x4cb658=await _0x70301e[_0x58e83c(0x142)]();if(!_0x4cb658[_0x58e83c(0x14d)]||!Array['isArray'](_0x4cb658[_0x58e83c(0x14d)])||_0x4cb658[_0x58e83c(0x14d)]['length']===0x0){console[_0x58e83c(0x133)]('Unexpected\x20API\x20response:',JSON[_0x58e83c(0x17b)](_0x4cb658,null,0x2));throw new Error('La\x20IA\x20no\x20devolvió\x20ninguna\x20elección\x20(choices).');}const _0xa76aae=_0x4cb658[_0x58e83c(0x14d)][0x0][_0x58e83c(0x161)];if(!_0xa76aae||typeof _0xa76aae[_0x58e83c(0x126)]!==_0x58e83c(0x162)){console[_0x58e83c(0x133)](_0x58e83c(0x147),JSON[_0x58e83c(0x17b)](_0x4cb658[_0x58e83c(0x14d)][0x0],null,0x2));throw new Error(_0x58e83c(0x140));}return _0xa76aae[_0x58e83c(0x126)][_0x58e83c(0x182)]();}async function createPDF(_0x1de0ff){return new Promise((_0x412add,_0x2512ec)=>{const _0x4572d2=a0_0x4976,_0x3ad693=new a0_0x3201bd({'margin':CONFIG[_0x4572d2(0x12e)][_0x4572d2(0x128)],'bufferPages':!![]}),_0x580491=[];_0x3ad693['on'](_0x4572d2(0x14a),_0x580491[_0x4572d2(0x16e)][_0x4572d2(0x177)](_0x580491)),_0x3ad693['on'](_0x4572d2(0x169),()=>_0x412add(Buffer[_0x4572d2(0x123)](_0x580491))),_0x3ad693['on'](_0x4572d2(0x133),_0x2512ec),_0x3ad693[_0x4572d2(0x12d)](_0x4572d2(0x125))[_0x4572d2(0x13f)](CONFIG[_0x4572d2(0x12e)][_0x4572d2(0x137)][_0x4572d2(0x159)][_0x4572d2(0x13f)])['text'](_0x1de0ff,{'align':_0x4572d2(0x132),'lineGap':CONFIG[_0x4572d2(0x12e)][_0x4572d2(0x137)][_0x4572d2(0x159)][_0x4572d2(0x166)],'paragraphGap':0xa}),_0x3ad693['on'](_0x4572d2(0x15c),()=>{const _0x49fbc6=_0x4572d2,_0x311678=_0x3ad693[_0x49fbc6(0x14e)]()[_0x49fbc6(0x183)];_0x3ad693[_0x49fbc6(0x13f)](0xa)[_0x49fbc6(0x165)](_0x49fbc6(0x17f)+_0x311678,CONFIG[_0x49fbc6(0x12e)][_0x49fbc6(0x128)],_0x3ad693['page']['height']-0x14,{'align':_0x49fbc6(0x174)});}),_0x3ad693[_0x4572d2(0x169)]();});}async function createPPTX(_0x4a5b6e){const _0x28f832=a0_0x593a5c,_0x150b0f=new a0_0x28e54c();_0x150b0f[_0x28f832(0x138)]=_0x28f832(0x160),_0x150b0f[_0x28f832(0x153)]={'bodyFontFace':_0x28f832(0x158),'titleFontFace':_0x28f832(0x158)};const _0x179f34=chunkText(_0x4a5b6e,0x1f4);return _0x179f34[_0x28f832(0x144)](_0x3e816e=>{const _0x431ff3=_0x28f832,_0x37bbfd=_0x150b0f['addSlide']();_0x37bbfd['addText'](_0x3e816e,{'x':0.5,'y':0x1,'w':12.3,'h':0x5,...CONFIG['pptx'][_0x431ff3(0x134)]});}),_0x150b0f['write'](_0x28f832(0x17d));}function a0_0x48c0(){const _0x36dce6=['pdf','respuesta.pdf','83800icVfPV','substring','justify','error','bodyStyle','-t=','1749828vHpYNv','styles','layout','\x0aTokens:\x20','📄\x20Resultado\x20para:\x20','sendFile','startsWith','get','ia3','fontSize','Respuesta\x20de\x20IA\x20malformada.','set','json','catch','forEach','7bCUEGJ','maxTokens','Malformed\x20choice\x20object:','temperature','WhatsApp\x20AI\x20Assistant','data','ia4\x20[-t=0.5]\x20[-m=1000]\x20<texto>\x20-\x20Opciones\x20avanzadas\x0a\x0a*Opciones:*\x0a-t\x20:\x20Temperatura\x20(0-2)\x0a-m\x20:\x20Máximo\x20de\x20tokens','https://yourdomain.com','choices','bufferedPageRange','180401dAcNDr','find','defaultModel','4AOjKHE','theme','63ziNWLU','ia4','user','POST','Arial','body','32394uHEmFp','ia3\x20<texto>\x20-\x20Generar\x20PPTX\x0a▸\x20','pageAdded','Bearer\x20','720408NZxiWI','reply','LAYOUT_WIDE','message','string','7663942RhHwfR','ia3\x20<texto>','text','lineGap','ia\x20<texto>\x20-\x20Respuesta\x20básica\x0a▸\x20','chat','end','assistant','*Comandos\x20disponibles:*\x0a▸\x20','application/json','deepseek/deepseek-r1:free','push','API\x20Error:\x20','max_tokens','split','2SJNoPb','toLowerCase','center','❌\x20Error:\x20','216ICiTkh','bind','[AI\x20ERROR]','model','tags','stringify','839140hHAmYg','nodebuffer','statusText','Página\x20','sender','-m=','trim','count','195xRmMHz','default','command','ia2\x20<texto>\x20-\x20Generar\x20PDF\x0a▸\x20','concat','length','Helvetica','content','ia2','margins','tools','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','ia\x20<texto>','https://openrouter.ai/api/v1/chat/completions','font'];a0_0x48c0=function(){return _0x36dce6;};return a0_0x48c0();}function chunkText(_0x2f2811,_0x1096ef){const _0x10e45f=a0_0x593a5c,_0x20776a=[];while(_0x2f2811[_0x10e45f(0x124)]>0x0){_0x20776a[_0x10e45f(0x16e)](_0x2f2811['substring'](0x0,_0x1096ef)),_0x2f2811=_0x2f2811[_0x10e45f(0x131)](_0x1096ef);}return _0x20776a;}function manageHistory(_0x3d46b3,_0xe71f79){const _0x1bd1f9=a0_0x593a5c;if(!chatHistory['has'](_0x3d46b3))chatHistory[_0x1bd1f9(0x141)](_0x3d46b3,[]);const _0x5b8917=chatHistory[_0x1bd1f9(0x13d)](_0x3d46b3);_0x5b8917[_0x1bd1f9(0x16e)](_0xe71f79),_0x5b8917[_0x1bd1f9(0x124)]>CONFIG['maxHistory']*0x2&&_0x5b8917['splice'](0x0,0x2);}let handler=async(_0x41a6cd,{conn:_0x58307e,text:_0x39ba1d,usedPrefix:_0x5bae85,command:_0x11cae7})=>{const _0x4b5330=a0_0x593a5c,_0x24fe8b=_0x41a6cd[_0x4b5330(0x180)],_0x5543f1=_0x39ba1d[_0x4b5330(0x171)]('\x20'),_0x368d0b={};let _0x3da36a=_0x39ba1d;if(_0x11cae7===_0x4b5330(0x155)){const _0x23d90a=_0x5543f1['find'](_0x38caff=>_0x38caff[_0x4b5330(0x13c)](_0x4b5330(0x135)))?.[_0x4b5330(0x171)]('=')[0x1],_0x334d48=_0x5543f1[_0x4b5330(0x150)](_0x5aeb4e=>_0x5aeb4e[_0x4b5330(0x13c)](_0x4b5330(0x181)))?.['split']('=')[0x1];if(_0x23d90a)_0x368d0b[_0x4b5330(0x148)]=parseFloat(_0x23d90a);if(_0x334d48)_0x368d0b[_0x4b5330(0x170)]=parseInt(_0x334d48);_0x3da36a=_0x5543f1['filter'](_0x3535d5=>!_0x3535d5[_0x4b5330(0x13c)]('-'))['join']('\x20');}if(!_0x3da36a)return _0x41a6cd[_0x4b5330(0x15f)](formatHelp(_0x5bae85));try{manageHistory(_0x24fe8b,{'role':_0x4b5330(0x156),'content':_0x3da36a});const _0x4a9b60=chatHistory[_0x4b5330(0x13d)](_0x24fe8b),_0x441cc0=await callIA(_0x4a9b60,_0x368d0b);manageHistory(_0x24fe8b,{'role':_0x4b5330(0x16a),'content':_0x441cc0});switch(_0x11cae7[_0x4b5330(0x173)]()){case'ia':await _0x41a6cd[_0x4b5330(0x15f)](_0x441cc0);break;case _0x4b5330(0x127):{const _0x2b0ffc=await createPDF(_0x441cc0);await _0x58307e['sendFile'](_0x41a6cd[_0x4b5330(0x168)],_0x2b0ffc,_0x4b5330(0x12f),_0x4b5330(0x13a)+_0x3da36a,_0x41a6cd);break;}case _0x4b5330(0x13e):{const _0x1b09eb=await createPPTX(_0x441cc0);await _0x58307e[_0x4b5330(0x13b)](_0x41a6cd[_0x4b5330(0x168)],_0x1b09eb,'presentacion.pptx','📊\x20Presentación\x20para:\x20'+_0x3da36a,_0x41a6cd);break;}case _0x4b5330(0x155):await _0x41a6cd[_0x4b5330(0x15f)]('⚙️\x20Configuraciones:\x0aTemperatura:\x20'+(_0x368d0b['temperature']||_0x4b5330(0x185))+_0x4b5330(0x139)+(_0x368d0b[_0x4b5330(0x170)]||_0x4b5330(0x185))+'\x0a\x0a'+_0x441cc0);break;default:await _0x41a6cd['reply'](_0x441cc0);}}catch(_0x2b6b28){console[_0x4b5330(0x133)](_0x4b5330(0x178),_0x2b6b28),await _0x41a6cd[_0x4b5330(0x15f)](_0x4b5330(0x175)+_0x2b6b28['message']);}};function formatHelp(_0x4cd08c){const _0x10628e=a0_0x593a5c;return _0x10628e(0x16b)+_0x4cd08c+_0x10628e(0x167)+_0x4cd08c+_0x10628e(0x122)+_0x4cd08c+_0x10628e(0x15b)+_0x4cd08c+_0x10628e(0x14b);}handler[a0_0x593a5c(0x186)]=/^(ia|ia2|ia3|ia4)$/i,handler['help']=[a0_0x593a5c(0x12b),'ia2\x20<texto>',a0_0x593a5c(0x164),'ia4\x20[opciones]\x20<texto>'],handler[a0_0x593a5c(0x17a)]=['ai',a0_0x593a5c(0x129)];export default handler;