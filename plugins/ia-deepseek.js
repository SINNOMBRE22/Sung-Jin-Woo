const a0_0x2c4fa1=a0_0x1bda;(function(_0x447603,_0x86a0eb){const _0x32616f=a0_0x1bda,_0x26e85d=_0x447603();while(!![]){try{const _0x58566a=-parseInt(_0x32616f(0xd2))/0x1*(-parseInt(_0x32616f(0xca))/0x2)+parseInt(_0x32616f(0xc4))/0x3*(-parseInt(_0x32616f(0xe9))/0x4)+parseInt(_0x32616f(0xc6))/0x5+parseInt(_0x32616f(0x9e))/0x6+parseInt(_0x32616f(0xc1))/0x7+parseInt(_0x32616f(0x8c))/0x8*(parseInt(_0x32616f(0xb0))/0x9)+-parseInt(_0x32616f(0xc2))/0xa*(parseInt(_0x32616f(0xbd))/0xb);if(_0x58566a===_0x86a0eb)break;else _0x26e85d['push'](_0x26e85d['shift']());}catch(_0xbf1b62){_0x26e85d['push'](_0x26e85d['shift']());}}}(a0_0x3625,0xa0649));import a0_0x28289a from'node-fetch';function a0_0x3625(){const _0xb5e46b=['ia\x20<texto>\x20-\x20Respuesta\x20básica\x0a▸\x20','toLowerCase','sendFile','get','margins','data','join','chat','trim','has','Bearer\x20','La\x20IA\x20no\x20devolvió\x20ninguna\x20elección\x20(choices).','55FTqOGO','addSlide','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','user','2676072pptuGy','1227710qtuJlU','pageAdded','879519cUMLmj','concat','1641935SvtOSG','[AI\x20ERROR]','json','fontSize','1724kyFVxN','help','application/json','POST','maxTokens','API\x20Error:\x20','ia3\x20<texto>\x20-\x20Generar\x20PPTX\x0a▸\x20','catch','706FPrevz','find','length','-t=','bufferedPageRange','Helvetica','LAYOUT_WIDE','default','stringify','ia\x20<texto>','center','assistant','set','error','splice','body','font','Malformed\x20choice\x20object:','ia4\x20[opciones]\x20<texto>','tags','lineGap','page','\x0aTokens:\x20','16hvXFGQ','temperature','Arial','Unexpected\x20API\x20response:','end','top_p','https://openrouter.ai/api/v1/chat/completions','Página\x20','layout','deepseek/deepseek-r1:free','ia4','35440LuKXWx','363636','max_tokens','statusText','📊\x20Presentación\x20para:\x20','model','split','maxHistory','ia2\x20<texto>\x20-\x20Generar\x20PDF\x0a▸\x20','📄\x20Resultado\x20para:\x20','filter','content','ia3','WhatsApp\x20AI\x20Assistant','text','substring','Respuesta\x20de\x20IA\x20malformada.','message','1987746VgkPVk','push','choices','presentacion.pptx','https://yourdomain.com','forEach','pdf','ia3\x20<texto>','isArray','startsWith','reply','string','ia2\x20<texto>','ia4\x20[-t=0.5]\x20[-m=1000]\x20<texto>\x20-\x20Opciones\x20avanzadas\x0a\x0a*Opciones:*\x0a-t\x20:\x20Temperatura\x20(0-2)\x0a-m\x20:\x20Máximo\x20de\x20tokens','respuesta.pdf','-m=','bind','defaultModel','1611sLUjbZ'];a0_0x3625=function(){return _0xb5e46b;};return a0_0x3625();}import a0_0x2540ef from'pdfkit';import a0_0x338a49 from'pptxgenjs';import{createWriteStream}from'fs';import{promisify}from'util';import{pipeline}from'stream';function a0_0x1bda(_0x1e2195,_0x35c40d){const _0x3625f9=a0_0x3625();return a0_0x1bda=function(_0x1bda37,_0x4ba158){_0x1bda37=_0x1bda37-0x89;let _0x33a16c=_0x3625f9[_0x1bda37];return _0x33a16c;},a0_0x1bda(_0x1e2195,_0x35c40d);}const API_KEY=a0_0x2c4fa1(0xbf),API_URL=a0_0x2c4fa1(0xef),CONFIG={'defaultModel':a0_0x2c4fa1(0x8a),'maxHistory':0x5,'maxTokens':0x5dc,'pdf':{'margins':0x32,'headerHeight':0x1e,'footerHeight':0x1e,'styles':{'title':{'fontSize':0x12,'bold':!![]},'body':{'fontSize':0xc,'lineGap':0x8}}},'pptx':{'slideWidth':13.33,'slideHeight':7.5,'titleStyle':{'fontSize':0x18,'bold':!![],'color':a0_0x2c4fa1(0x8d)},'bodyStyle':{'fontSize':0x10,'bullet':!![],'lineSpacing':0x18}}},chatHistory=new Map();async function callIA(_0x242073,_0x42dbe6={}){const _0x21cb55=a0_0x2c4fa1,_0x2e6551=await a0_0x28289a(API_URL,{'method':_0x21cb55(0xcd),'headers':{'Authorization':_0x21cb55(0xbb)+API_KEY,'Content-Type':_0x21cb55(0xcc),'HTTP-Referer':_0x21cb55(0xa2),'X-Title':_0x21cb55(0x99)},'body':JSON['stringify']({'model':_0x42dbe6[_0x21cb55(0x91)]||CONFIG[_0x21cb55(0xaf)],'messages':_0x242073,'temperature':_0x42dbe6[_0x21cb55(0xea)]||0.7,'max_tokens':_0x42dbe6[_0x21cb55(0x8e)]||CONFIG[_0x21cb55(0xce)],'top_p':_0x42dbe6[_0x21cb55(0xee)]||0x1})});if(!_0x2e6551['ok']){const _0x4cddf5=await _0x2e6551[_0x21cb55(0xc8)]()[_0x21cb55(0xd1)](()=>({}));throw new Error(_0x21cb55(0xcf)+(_0x4cddf5[_0x21cb55(0xdf)]?.[_0x21cb55(0x9d)]||_0x2e6551[_0x21cb55(0x8f)]));}const _0x15ca5d=await _0x2e6551[_0x21cb55(0xc8)]();if(!_0x15ca5d[_0x21cb55(0xa0)]||!Array[_0x21cb55(0xa6)](_0x15ca5d[_0x21cb55(0xa0)])||_0x15ca5d['choices'][_0x21cb55(0xd4)]===0x0){console[_0x21cb55(0xdf)](_0x21cb55(0xec),JSON['stringify'](_0x15ca5d,null,0x2));throw new Error(_0x21cb55(0xbc));}const _0x30a967=_0x15ca5d[_0x21cb55(0xa0)][0x0][_0x21cb55(0x9d)];if(!_0x30a967||typeof _0x30a967[_0x21cb55(0x97)]!==_0x21cb55(0xa9)){console[_0x21cb55(0xdf)](_0x21cb55(0xe3),JSON[_0x21cb55(0xda)](_0x15ca5d[_0x21cb55(0xa0)][0x0],null,0x2));throw new Error(_0x21cb55(0x9c));}return _0x30a967[_0x21cb55(0x97)][_0x21cb55(0xb9)]();}async function createPDF(_0x19c43c){return new Promise((_0x486b84,_0x1d87ec)=>{const _0x12f4cd=a0_0x1bda,_0x29605f=new a0_0x2540ef({'margin':CONFIG['pdf'][_0x12f4cd(0xb5)],'bufferPages':!![]}),_0x534d67=[];_0x29605f['on'](_0x12f4cd(0xb6),_0x534d67[_0x12f4cd(0x9f)][_0x12f4cd(0xae)](_0x534d67)),_0x29605f['on'](_0x12f4cd(0xed),()=>_0x486b84(Buffer[_0x12f4cd(0xc5)](_0x534d67))),_0x29605f['on']('error',_0x1d87ec),_0x29605f[_0x12f4cd(0xe2)](_0x12f4cd(0xd7))['fontSize'](CONFIG[_0x12f4cd(0xa4)]['styles']['body'][_0x12f4cd(0xc9)])[_0x12f4cd(0x9a)](_0x19c43c,{'align':'justify','lineGap':CONFIG['pdf']['styles'][_0x12f4cd(0xe1)][_0x12f4cd(0xe6)],'paragraphGap':0xa}),_0x29605f['on'](_0x12f4cd(0xc3),()=>{const _0x40498f=_0x12f4cd,_0x27fef8=_0x29605f[_0x40498f(0xd6)]()['count'];_0x29605f[_0x40498f(0xc9)](0xa)[_0x40498f(0x9a)](_0x40498f(0xf0)+_0x27fef8,CONFIG[_0x40498f(0xa4)][_0x40498f(0xb5)],_0x29605f[_0x40498f(0xe7)]['height']-0x14,{'align':_0x40498f(0xdc)});}),_0x29605f[_0x12f4cd(0xed)]();});}async function createPPTX(_0x42c476){const _0x18fe0d=a0_0x2c4fa1,_0x271d8e=new a0_0x338a49();_0x271d8e[_0x18fe0d(0x89)]=_0x18fe0d(0xd8),_0x271d8e['theme']={'bodyFontFace':_0x18fe0d(0xeb),'titleFontFace':_0x18fe0d(0xeb)};const _0x358697=chunkText(_0x42c476,0x1f4);return _0x358697[_0x18fe0d(0xa3)](_0x22fb56=>{const _0x3c601a=_0x18fe0d,_0x1505c3=_0x271d8e[_0x3c601a(0xbe)]();_0x1505c3['addText'](_0x22fb56,{'x':0.5,'y':0x1,'w':12.3,'h':0x5,...CONFIG['pptx']['bodyStyle']});}),_0x271d8e['write']('nodebuffer');}function chunkText(_0x267a92,_0x46d6cb){const _0xf80283=a0_0x2c4fa1,_0x1a92a2=[];while(_0x267a92[_0xf80283(0xd4)]>0x0){_0x1a92a2['push'](_0x267a92[_0xf80283(0x9b)](0x0,_0x46d6cb)),_0x267a92=_0x267a92[_0xf80283(0x9b)](_0x46d6cb);}return _0x1a92a2;}function manageHistory(_0x3e86d4,_0x22cb6c){const _0x43e896=a0_0x2c4fa1;if(!chatHistory[_0x43e896(0xba)](_0x3e86d4))chatHistory[_0x43e896(0xde)](_0x3e86d4,[]);const _0xa811ce=chatHistory[_0x43e896(0xb4)](_0x3e86d4);_0xa811ce[_0x43e896(0x9f)](_0x22cb6c),_0xa811ce['length']>CONFIG[_0x43e896(0x93)]*0x2&&_0xa811ce[_0x43e896(0xe0)](0x0,0x2);}let handler=async(_0x599ea5,{conn:_0x366bf6,text:_0x2bc7e2,usedPrefix:_0x426daf,command:_0x352579})=>{const _0x44e794=a0_0x2c4fa1,_0x8d5452=_0x599ea5['sender'],_0x410f89=_0x2bc7e2[_0x44e794(0x92)]('\x20'),_0x6dc588={};let _0x37ba10=_0x2bc7e2;if(_0x352579===_0x44e794(0x8b)){const _0x360dc0=_0x410f89[_0x44e794(0xd3)](_0x3b88e1=>_0x3b88e1[_0x44e794(0xa7)](_0x44e794(0xd5)))?.[_0x44e794(0x92)]('=')[0x1],_0x52da03=_0x410f89[_0x44e794(0xd3)](_0x1d77d3=>_0x1d77d3[_0x44e794(0xa7)](_0x44e794(0xad)))?.[_0x44e794(0x92)]('=')[0x1];if(_0x360dc0)_0x6dc588[_0x44e794(0xea)]=parseFloat(_0x360dc0);if(_0x52da03)_0x6dc588[_0x44e794(0x8e)]=parseInt(_0x52da03);_0x37ba10=_0x410f89[_0x44e794(0x96)](_0x261cd1=>!_0x261cd1[_0x44e794(0xa7)]('-'))[_0x44e794(0xb7)]('\x20');}if(!_0x37ba10)return _0x599ea5[_0x44e794(0xa8)](formatHelp(_0x426daf));try{manageHistory(_0x8d5452,{'role':_0x44e794(0xc0),'content':_0x37ba10});const _0x1bdc67=chatHistory[_0x44e794(0xb4)](_0x8d5452),_0x2dcdaf=await callIA(_0x1bdc67,_0x6dc588);manageHistory(_0x8d5452,{'role':_0x44e794(0xdd),'content':_0x2dcdaf});switch(_0x352579[_0x44e794(0xb2)]()){case'ia':await _0x599ea5[_0x44e794(0xa8)](_0x2dcdaf);break;case'ia2':{const _0x13fb48=await createPDF(_0x2dcdaf);await _0x366bf6[_0x44e794(0xb3)](_0x599ea5[_0x44e794(0xb8)],_0x13fb48,_0x44e794(0xac),_0x44e794(0x95)+_0x37ba10,_0x599ea5);break;}case _0x44e794(0x98):{const _0x50848c=await createPPTX(_0x2dcdaf);await _0x366bf6[_0x44e794(0xb3)](_0x599ea5[_0x44e794(0xb8)],_0x50848c,_0x44e794(0xa1),_0x44e794(0x90)+_0x37ba10,_0x599ea5);break;}case'ia4':await _0x599ea5['reply']('⚙️\x20Configuraciones:\x0aTemperatura:\x20'+(_0x6dc588[_0x44e794(0xea)]||_0x44e794(0xd9))+_0x44e794(0xe8)+(_0x6dc588['max_tokens']||_0x44e794(0xd9))+'\x0a\x0a'+_0x2dcdaf);break;default:await _0x599ea5[_0x44e794(0xa8)](_0x2dcdaf);}}catch(_0xd31662){console[_0x44e794(0xdf)](_0x44e794(0xc7),_0xd31662),await _0x599ea5['reply']('❌\x20Error:\x20'+_0xd31662[_0x44e794(0x9d)]);}};function formatHelp(_0x48737e){const _0x25785a=a0_0x2c4fa1;return'*Comandos\x20disponibles:*\x0a▸\x20'+_0x48737e+_0x25785a(0xb1)+_0x48737e+_0x25785a(0x94)+_0x48737e+_0x25785a(0xd0)+_0x48737e+_0x25785a(0xab);}handler['command']=/^(ia|ia2|ia3|ia4)$/i,handler[a0_0x2c4fa1(0xcb)]=[a0_0x2c4fa1(0xdb),a0_0x2c4fa1(0xaa),a0_0x2c4fa1(0xa5),a0_0x2c4fa1(0xe4)],handler[a0_0x2c4fa1(0xe5)]=['ai','tools'];export default handler;