const a0_0x4f1e2f=a0_0x3324;(function(_0x1d1405,_0x378250){const _0x32feb9=a0_0x3324,_0x443a06=_0x1d1405();while(!![]){try{const _0x2cc7e7=parseInt(_0x32feb9(0x150))/0x1+parseInt(_0x32feb9(0x14b))/0x2+-parseInt(_0x32feb9(0x151))/0x3*(parseInt(_0x32feb9(0x165))/0x4)+-parseInt(_0x32feb9(0x179))/0x5+-parseInt(_0x32feb9(0x133))/0x6+-parseInt(_0x32feb9(0x139))/0x7*(parseInt(_0x32feb9(0x130))/0x8)+parseInt(_0x32feb9(0x140))/0x9;if(_0x2cc7e7===_0x378250)break;else _0x443a06['push'](_0x443a06['shift']());}catch(_0x1f45bb){_0x443a06['push'](_0x443a06['shift']());}}}(a0_0x38e4,0xb9b06));import a0_0x4280e3 from'node-fetch';import a0_0x42799c from'pdfkit';import a0_0x17b131 from'pptxgenjs';function a0_0x3324(_0x67523d,_0x1df37c){const _0x38e46b=a0_0x38e4();return a0_0x3324=function(_0x332452,_0x5872f9){_0x332452=_0x332452-0x11f;let _0x3deb82=_0x38e46b[_0x332452];return _0x3deb82;},a0_0x3324(_0x67523d,_0x1df37c);}import{createWriteStream}from'fs';import{promisify}from'util';import{pipeline}from'stream';const API_KEY=a0_0x4f1e2f(0x17a),API_URL=a0_0x4f1e2f(0x168),CONFIG={'defaultModel':a0_0x4f1e2f(0x178),'maxHistory':0x5,'maxTokens':0x5dc,'pdf':{'margins':0x32,'headerHeight':0x1e,'footerHeight':0x1e,'styles':{'title':{'fontSize':0x12,'bold':!![]},'body':{'fontSize':0xc,'lineGap':0x8}}},'pptx':{'slideWidth':13.33,'slideHeight':7.5,'titleStyle':{'fontSize':0x18,'bold':!![],'color':a0_0x4f1e2f(0x162)},'bodyStyle':{'fontSize':0x10,'bullet':!![],'lineSpacing':0x18}}},chatHistory=new Map();async function callIA(_0x5996b7,_0xb714d={}){const _0x128e0c=a0_0x4f1e2f,_0x135a39=await a0_0x4280e3(API_URL,{'method':'POST','headers':{'Authorization':_0x128e0c(0x123)+API_KEY,'Content-Type':_0x128e0c(0x12b),'HTTP-Referer':_0x128e0c(0x17d),'X-Title':_0x128e0c(0x13b)},'body':JSON['stringify']({'model':_0xb714d[_0x128e0c(0x134)]||CONFIG[_0x128e0c(0x146)],'messages':_0x5996b7,'temperature':_0xb714d[_0x128e0c(0x163)]||0.7,'max_tokens':_0xb714d['max_tokens']||CONFIG['maxTokens'],'top_p':_0xb714d[_0x128e0c(0x169)]||0x1})});if(!_0x135a39['ok']){const _0x48a00a=await _0x135a39['json']()['catch'](()=>({}));throw new Error(_0x128e0c(0x152)+(_0x48a00a['error']?.[_0x128e0c(0x170)]||_0x135a39[_0x128e0c(0x14a)]));}const _0x86e542=await _0x135a39[_0x128e0c(0x122)]();if(!_0x86e542['choices']||!Array['isArray'](_0x86e542[_0x128e0c(0x13d)])||_0x86e542[_0x128e0c(0x13d)][_0x128e0c(0x12d)]===0x0){console[_0x128e0c(0x16f)](_0x128e0c(0x176),JSON[_0x128e0c(0x13f)](_0x86e542,null,0x2));throw new Error(_0x128e0c(0x135));}const _0x2885b9=_0x86e542[_0x128e0c(0x13d)][0x0][_0x128e0c(0x170)];if(!_0x2885b9||typeof _0x2885b9[_0x128e0c(0x171)]!==_0x128e0c(0x147)){console['error']('Malformed\x20choice\x20object:',JSON[_0x128e0c(0x13f)](_0x86e542['choices'][0x0],null,0x2));throw new Error(_0x128e0c(0x12e));}return _0x2885b9[_0x128e0c(0x171)][_0x128e0c(0x167)]();}async function createPDF(_0x2257db){return new Promise((_0x1b3026,_0x50c475)=>{const _0x2b207e=a0_0x3324,_0x428926=new a0_0x42799c({'margin':CONFIG['pdf'][_0x2b207e(0x15a)],'bufferPages':!![]}),_0x1a3bd0=[];_0x428926['on'](_0x2b207e(0x17c),_0x1a3bd0[_0x2b207e(0x124)][_0x2b207e(0x157)](_0x1a3bd0)),_0x428926['on'](_0x2b207e(0x14d),()=>_0x1b3026(Buffer['concat'](_0x1a3bd0))),_0x428926['on']('error',_0x50c475),_0x428926['font'](_0x2b207e(0x15e))[_0x2b207e(0x136)](CONFIG[_0x2b207e(0x156)][_0x2b207e(0x126)][_0x2b207e(0x13e)]['fontSize'])['text'](_0x2257db,{'align':_0x2b207e(0x15c),'lineGap':CONFIG[_0x2b207e(0x156)][_0x2b207e(0x126)][_0x2b207e(0x13e)]['lineGap'],'paragraphGap':0xa}),_0x428926['on']('pageAdded',()=>{const _0x3fa47a=_0x2b207e,_0x424576=_0x428926[_0x3fa47a(0x14e)]()['count'];_0x428926[_0x3fa47a(0x136)](0xa)['text'](_0x3fa47a(0x132)+_0x424576,CONFIG[_0x3fa47a(0x156)][_0x3fa47a(0x15a)],_0x428926[_0x3fa47a(0x154)][_0x3fa47a(0x137)]-0x14,{'align':_0x3fa47a(0x138)});}),_0x428926[_0x2b207e(0x14d)]();});}async function createPPTX(_0x1c4028){const _0x5f55b9=a0_0x4f1e2f,_0x539ed8=new a0_0x17b131();_0x539ed8['layout']='LAYOUT_WIDE',_0x539ed8[_0x5f55b9(0x172)]={'bodyFontFace':_0x5f55b9(0x177),'titleFontFace':_0x5f55b9(0x177)};const _0x5883c8=chunkText(_0x1c4028,0x1f4);return _0x5883c8[_0x5f55b9(0x121)](_0x4341de=>{const _0x3d3df3=_0x5f55b9,_0x1e0a3b=_0x539ed8[_0x3d3df3(0x17b)]();_0x1e0a3b['addText'](_0x4341de,{'x':0.5,'y':0x1,'w':12.3,'h':0x5,...CONFIG[_0x3d3df3(0x175)][_0x3d3df3(0x159)]});}),_0x539ed8[_0x5f55b9(0x12f)](_0x5f55b9(0x16c));}function a0_0x38e4(){const _0x1a673e=['openai/gpt-4o','6677745HRQklF','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','addSlide','data','https://yourdomain.com','ia3\x20<texto>\x20-\x20Generar\x20PPTX\x0a▸\x20','set','forEach','json','Bearer\x20','push','*Comandos\x20disponibles:*\x0a▸\x20','styles','has','get','sendFile','filter','application/json','ia4','length','Respuesta\x20de\x20IA\x20malformada.','write','32sARCHX','user','Página\x20','1727004mTHGgU','model','La\x20IA\x20no\x20devolvió\x20ninguna\x20elección\x20(choices).','fontSize','height','center','898177YyfEKY','-t=','WhatsApp\x20AI\x20Assistant','help','choices','body','stringify','28310832lGVucc','sender','split','chat','\x0aTokens:\x20','substring','defaultModel','string','[AI\x20ERROR]','ia4\x20[-t=0.5]\x20[-m=1000]\x20<texto>\x20-\x20Opciones\x20avanzadas\x0a\x0a*Opciones:*\x0a-t\x20:\x20Temperatura\x20(0-2)\x0a-m\x20:\x20Máximo\x20de\x20tokens','statusText','39636MHElaX','max_tokens','end','bufferedPageRange','toLowerCase','1072199yzgvfL','1005342rWQJLh','API\x20Error:\x20','ia4\x20[opciones]\x20<texto>','page','tags','pdf','bind','⚙️\x20Configuraciones:\x0aTemperatura:\x20','bodyStyle','margins','assistant','justify','startsWith','Helvetica','default','presentacion.pptx','find','363636','temperature','ia2','16OEdMhx','splice','trim','https://openrouter.ai/api/v1/chat/completions','top_p','ia\x20<texto>','ia3','nodebuffer','❌\x20Error:\x20','ia3\x20<texto>','error','message','content','theme','📄\x20Resultado\x20para:\x20','reply','pptx','Unexpected\x20API\x20response:','Arial'];a0_0x38e4=function(){return _0x1a673e;};return a0_0x38e4();}function chunkText(_0x39ce8b,_0xb9b319){const _0x21c63a=a0_0x4f1e2f,_0x134e4f=[];while(_0x39ce8b['length']>0x0){_0x134e4f['push'](_0x39ce8b[_0x21c63a(0x145)](0x0,_0xb9b319)),_0x39ce8b=_0x39ce8b[_0x21c63a(0x145)](_0xb9b319);}return _0x134e4f;}function manageHistory(_0x39ba78,_0x23c7b4){const _0x3ed4cd=a0_0x4f1e2f;if(!chatHistory[_0x3ed4cd(0x127)](_0x39ba78))chatHistory[_0x3ed4cd(0x120)](_0x39ba78,[]);const _0x66d0d0=chatHistory[_0x3ed4cd(0x128)](_0x39ba78);_0x66d0d0[_0x3ed4cd(0x124)](_0x23c7b4),_0x66d0d0[_0x3ed4cd(0x12d)]>CONFIG['maxHistory']*0x2&&_0x66d0d0[_0x3ed4cd(0x166)](0x0,0x2);}let handler=async(_0x54940b,{conn:_0x1727f2,text:_0x343f24,usedPrefix:_0x1f6479,command:_0x324c44})=>{const _0x1665be=a0_0x4f1e2f,_0x433557=_0x54940b[_0x1665be(0x141)],_0x414a1e=_0x343f24[_0x1665be(0x142)]('\x20'),_0x35e3fa={};let _0x1cdd2b=_0x343f24;if(_0x324c44===_0x1665be(0x12c)){const _0x2f73f5=_0x414a1e[_0x1665be(0x161)](_0x109121=>_0x109121['startsWith'](_0x1665be(0x13a)))?.[_0x1665be(0x142)]('=')[0x1],_0x2a2a06=_0x414a1e[_0x1665be(0x161)](_0x2d30f6=>_0x2d30f6['startsWith']('-m='))?.['split']('=')[0x1];if(_0x2f73f5)_0x35e3fa[_0x1665be(0x163)]=parseFloat(_0x2f73f5);if(_0x2a2a06)_0x35e3fa['max_tokens']=parseInt(_0x2a2a06);_0x1cdd2b=_0x414a1e[_0x1665be(0x12a)](_0x3fa9f8=>!_0x3fa9f8[_0x1665be(0x15d)]('-'))['join']('\x20');}if(!_0x1cdd2b)return _0x54940b[_0x1665be(0x174)](formatHelp(_0x1f6479));try{manageHistory(_0x433557,{'role':_0x1665be(0x131),'content':_0x1cdd2b});const _0x4013a1=chatHistory[_0x1665be(0x128)](_0x433557),_0x475a3f=await callIA(_0x4013a1,_0x35e3fa);manageHistory(_0x433557,{'role':_0x1665be(0x15b),'content':_0x475a3f});switch(_0x324c44[_0x1665be(0x14f)]()){case'ia':await _0x54940b[_0x1665be(0x174)](_0x475a3f);break;case _0x1665be(0x164):{const _0x585f7e=await createPDF(_0x475a3f);await _0x1727f2[_0x1665be(0x129)](_0x54940b[_0x1665be(0x143)],_0x585f7e,'respuesta.pdf',_0x1665be(0x173)+_0x1cdd2b,_0x54940b);break;}case _0x1665be(0x16b):{const _0x18fc6f=await createPPTX(_0x475a3f);await _0x1727f2['sendFile'](_0x54940b[_0x1665be(0x143)],_0x18fc6f,_0x1665be(0x160),'📊\x20Presentación\x20para:\x20'+_0x1cdd2b,_0x54940b);break;}case'ia4':await _0x54940b[_0x1665be(0x174)](_0x1665be(0x158)+(_0x35e3fa[_0x1665be(0x163)]||_0x1665be(0x15f))+_0x1665be(0x144)+(_0x35e3fa[_0x1665be(0x14c)]||_0x1665be(0x15f))+'\x0a\x0a'+_0x475a3f);break;default:await _0x54940b[_0x1665be(0x174)](_0x475a3f);}}catch(_0x5ef35a){console[_0x1665be(0x16f)](_0x1665be(0x148),_0x5ef35a),await _0x54940b['reply'](_0x1665be(0x16d)+_0x5ef35a[_0x1665be(0x170)]);}};function formatHelp(_0x2c8408){const _0x34f082=a0_0x4f1e2f;return _0x34f082(0x125)+_0x2c8408+'ia\x20<texto>\x20-\x20Respuesta\x20básica\x0a▸\x20'+_0x2c8408+'ia2\x20<texto>\x20-\x20Generar\x20PDF\x0a▸\x20'+_0x2c8408+_0x34f082(0x11f)+_0x2c8408+_0x34f082(0x149);}handler['command']=/^(ia|ia2|ia3|ia4)$/i,handler[a0_0x4f1e2f(0x13c)]=[a0_0x4f1e2f(0x16a),'ia2\x20<texto>',a0_0x4f1e2f(0x16e),a0_0x4f1e2f(0x153)],handler[a0_0x4f1e2f(0x155)]=['ai','tools'];export default handler;