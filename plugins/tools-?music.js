const a0_0x2e0931=a0_0x11f8;(function(_0x1c3b53,_0x2ac66f){const _0x28a14f=a0_0x11f8,_0x3bc917=_0x1c3b53();while(!![]){try{const _0x2be9ae=-parseInt(_0x28a14f(0x141))/0x1+parseInt(_0x28a14f(0x154))/0x2+parseInt(_0x28a14f(0x146))/0x3+-parseInt(_0x28a14f(0x135))/0x4*(-parseInt(_0x28a14f(0x157))/0x5)+parseInt(_0x28a14f(0x158))/0x6*(-parseInt(_0x28a14f(0x145))/0x7)+parseInt(_0x28a14f(0x138))/0x8+-parseInt(_0x28a14f(0x147))/0x9;if(_0x2be9ae===_0x2ac66f)break;else _0x3bc917['push'](_0x3bc917['shift']());}catch(_0x2585b7){_0x3bc917['push'](_0x3bc917['shift']());}}}(a0_0x18a5,0x189ad));import{Shazam}from'node-shazam';import a0_0x59cc82 from'node-fetch';function a0_0x18a5(){const _0x50708e=['mimetype','2080ZThTaz','\x0aðŸŽ§\x20*Genres:*\x20','getFile','707912EnHlVR','.mp3','track','./src/tmp/','fromFilePath','url','error','join','split','138420LtFiiu','chat','\x0aðŸŽ¤\x20*Artist:*\x20','quoted','371LdzykY','245568YvryGU','609408WIlhwb','coverart','Unknown','Por\x20favor,\x20envÃ­a\x20un\x20archivo\x20de\x20audio\x20o\x20video.','>\x20*[â—]\x20Error:\x20Audio\x20not\x20found.*','primary','sendMessage','https://github.com/BrunoSobrino','MyApiRestBaseUrl','\x20-\x20','videos','existsSync','/api/v1/ytmp3?url=','235930fosMit','reply','sender','1325iPbVQA','13494UTnCfv','writeFileSync','test','command','length','&apikey=','ðŸŽ¶\x20*Title:*\x20','download','MyApiRestApikey'];a0_0x18a5=function(){return _0x50708e;};return a0_0x18a5();}import a0_0x56a3f6 from'fs';import a0_0xd995ea from'yt-search';import a0_0x38bc33 from'path';const shazam=new Shazam(),handler=async(_0x537b45,{conn:_0x43281c})=>{const _0x4839ae=a0_0x11f8,_0x1fe901=_0x537b45[_0x4839ae(0x144)]||_0x537b45,_0x19d6c3=(_0x1fe901['msg']||_0x1fe901)[_0x4839ae(0x134)]||'';if(/audio|video/[_0x4839ae(0x15a)](_0x19d6c3)){const _0x4d679b=await _0x1fe901[_0x4839ae(0x132)](),_0x38ca4d=_0x19d6c3[_0x4839ae(0x140)]('/')[0x1],_0x3ae054=_0x4839ae(0x13b)+_0x537b45[_0x4839ae(0x156)],_0x442bb8=await getUniqueFileName(_0x3ae054,_0x38ca4d);a0_0x56a3f6[_0x4839ae(0x159)](_0x442bb8,_0x4d679b);let _0x355c1f;if(/audio/['test'](_0x19d6c3))_0x355c1f=shazam[_0x4839ae(0x13c)](_0x442bb8,![],'en');else/video/[_0x4839ae(0x15a)](_0x19d6c3)&&(_0x355c1f=shazam['fromVideoFile'](_0x442bb8,![],'en'));const _0x2a5ea2=await _0x355c1f;if(!_0x2a5ea2||!_0x2a5ea2?.[_0x4839ae(0x13a)])return _0x537b45['reply'](_0x4839ae(0x14b));const {title:_0x22a717,subtitle:_0x1d2591,artists:_0x1fe027,genres:_0x30aeba,images:_0x308350}=_0x2a5ea2[_0x4839ae(0x13a)],_0x2d4d6e=(_0x22a717+_0x4839ae(0x150)+(_0x1d2591||''))['trim']();let _0x4b598a=_0x4839ae(0x14e);try{const _0x3de04c=await a0_0xd995ea(_0x2d4d6e);_0x3de04c&&_0x3de04c[_0x4839ae(0x151)][_0x4839ae(0x15c)]>0x0&&(_0x4b598a=_0x3de04c[_0x4839ae(0x151)][0x0][_0x4839ae(0x13d)]);}catch(_0x44629e){console['error'](_0x44629e);}const _0x36afb0=_0x4839ae(0x15e)+(_0x22a717||'Unknown')+_0x4839ae(0x143)+(_0x1fe027?.[_0x4839ae(0x13f)](',\x20')||_0x4839ae(0x149))+_0x4839ae(0x136)+(_0x30aeba[_0x4839ae(0x14c)]||'Unknown'),_0x461203=await(await a0_0x59cc82(_0x308350[_0x4839ae(0x148)]))['buffer']();_0x43281c[_0x4839ae(0x14d)](_0x537b45[_0x4839ae(0x142)],{'text':_0x36afb0['trim'](),'contextInfo':{'forwardingScore':0x98967f,'isForwarded':!![],'externalAdReply':{'showAdAttribution':!![],'containsAutoReply':!![],'renderLargerThumbnail':!![],'title':_0x2d4d6e,'mediaType':0x1,'thumbnail':_0x461203,'thumbnailUrl':_0x461203,'mediaUrl':_0x4b598a,'sourceUrl':_0x4b598a}}},{'quoted':_0x537b45});try{const _0xba88fa=global[_0x4839ae(0x14f)]+_0x4839ae(0x153)+encodeURIComponent(_0x4b598a)+_0x4839ae(0x15d)+global[_0x4839ae(0x133)],_0x1c6d0b=await _0x43281c[_0x4839ae(0x137)](_0xba88fa);await _0x43281c[_0x4839ae(0x14d)](_0x537b45[_0x4839ae(0x142)],{'audio':_0x1c6d0b['data'],'fileName':_0x22a717+_0x4839ae(0x139),'mimetype':'audio/mpeg'},{'quoted':_0x537b45});}catch(_0x26c787){console[_0x4839ae(0x13e)](_0x26c787);}a0_0x56a3f6['unlinkSync'](_0x442bb8);}else _0x537b45[_0x4839ae(0x155)](_0x4839ae(0x14a));};handler[a0_0x2e0931(0x15b)]=/^(quemusica|quemusicaes|whatmusic|shazam)$/i;function a0_0x11f8(_0x3273d5,_0x272154){const _0x18a5a9=a0_0x18a5();return a0_0x11f8=function(_0x11f8e5,_0x385937){_0x11f8e5=_0x11f8e5-0x132;let _0xe4c0e4=_0x18a5a9[_0x11f8e5];return _0xe4c0e4;},a0_0x11f8(_0x3273d5,_0x272154);}export default handler;async function getUniqueFileName(_0x6a701c,_0xf72b23){const _0x325d5b=a0_0x2e0931;let _0x19b6e1=_0x6a701c+'.'+_0xf72b23,_0x37fa0d=0x1;while(a0_0x56a3f6[_0x325d5b(0x152)](_0x19b6e1)){_0x19b6e1=_0x6a701c+'_'+_0x37fa0d+'.'+_0xf72b23,_0x37fa0d++;}return _0x19b6e1;};