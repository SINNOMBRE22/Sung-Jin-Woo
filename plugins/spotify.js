const a0_0x4c50be=a0_0x4edc;(function(_0x4330db,_0x163d29){const _0x1a7d6b=a0_0x4edc,_0x8a88dd=_0x4330db();while(!![]){try{const _0xd5792d=parseInt(_0x1a7d6b(0x17d))/0x1+-parseInt(_0x1a7d6b(0x174))/0x2+-parseInt(_0x1a7d6b(0x164))/0x3*(parseInt(_0x1a7d6b(0x18c))/0x4)+parseInt(_0x1a7d6b(0x160))/0x5+-parseInt(_0x1a7d6b(0x177))/0x6+parseInt(_0x1a7d6b(0x18a))/0x7+parseInt(_0x1a7d6b(0x18e))/0x8;if(_0xd5792d===_0x163d29)break;else _0x8a88dd['push'](_0x8a88dd['shift']());}catch(_0x105006){_0x8a88dd['push'](_0x8a88dd['shift']());}}}(a0_0x5f0a,0x336b0));import a0_0x578c08 from'axios';import a0_0x29724c from'node-fetch';import a0_0x1e8de2 from'yt-search';function a0_0x5f0a(){const _0xc3cb12=['map','album','grant_type=client_credentials','toString','audio/mpeg','\x0aTitle:\x20','artists','Could\x20not\x20obtain\x20access\x20token','347288CoHUuV','json','/search/spotify?q=','471528NcEQFX','\x20<search\x20query>','length','result','images','floor','368751ZGxPxs','name','⚠️\x20No\x20results\x20found\x20for\x20that\x20query.','error','react','Spotify\x20Downloader','\x0aAlbum:\x20','chat','Bearer\x20','title','\x0a\x20\x20','external_urls','post','824495OnPkJR','application/x-www-form-urlencoded','4mAeVdb','duration','893440aKaIkj','download','❌\x20No\x20results\x20found,\x20please\x20try\x20again.','acc6302297e040aeb6e4ac1fbdfd62c3:0e8439a1280a43aba9a5bc0a16f3f009','items','.mp3','from','Basic\x20','join','image','465545XJxdVB','base64','\x0aDuration:\x20','music','685455HgSshI','/download/spotifydl?url=','https://api.siputzx.my.id/api/d/spotify?url=','url','Error\x20in\x20tokens:\x20','sendMessage','data','Usage:\x20'];a0_0x5f0a=function(){return _0xc3cb12;};return a0_0x5f0a();}let handler=async(_0x170854,{conn:_0x14d5a1,text:_0x263fef,usedPrefix:_0x332835,command:_0x4f81a6})=>{const _0x242a13=a0_0x4edc;if(!_0x263fef)throw _0x242a13(0x16b)+(_0x332835+_0x4f81a6)+_0x242a13(0x178);const _0x54ffaf=await a0_0x29724c(apis+_0x242a13(0x176)+encodeURIComponent(_0x263fef)),_0x375a2a=await _0x54ffaf['json']();if(!_0x375a2a[_0x242a13(0x16a)]||_0x375a2a[_0x242a13(0x16a)]['length']===0x0)throw _0x242a13(0x17f);const _0x11eb92=_0x375a2a[_0x242a13(0x16a)][0x0];let _0x3d26b6=_0x242a13(0x171)+_0x11eb92[_0x242a13(0x186)]+'\x0aArtist:\x20'+_0x11eb92['artist']+_0x242a13(0x183)+_0x11eb92[_0x242a13(0x16d)]+_0x242a13(0x162)+_0x11eb92[_0x242a13(0x18d)]+'\x0aLink:\x20'+_0x11eb92[_0x242a13(0x167)]+_0x242a13(0x187);await _0x14d5a1[_0x242a13(0x169)](_0x170854[_0x242a13(0x184)],{'text':_0x3d26b6,'contextInfo':{'forwardingScore':0x1,'isForwarded':!![],'externalAdReply':{'showAdAttribution':!![],'containsAutoReply':!![],'renderLargerThumbnail':!![],'title':_0x11eb92[_0x242a13(0x186)],'body':_0x242a13(0x182),'mediaType':0x1,'thumbnailUrl':_0x11eb92[_0x242a13(0x15f)],'mediaUrl':_0x11eb92[_0x242a13(0x167)],'sourceUrl':_0x11eb92[_0x242a13(0x167)]}}},{'quoted':_0x170854}),_0x170854[_0x242a13(0x181)]('⌛️');try{const _0x3f5c6d=await a0_0x29724c(_0x242a13(0x166)+_0x11eb92['url']),_0xb95819=await _0x3f5c6d[_0x242a13(0x175)]();await _0x14d5a1['sendMessage'](_0x170854[_0x242a13(0x184)],{'audio':{'url':_0xb95819[_0x242a13(0x16a)][_0x242a13(0x18f)]},'fileName':_0x11eb92[_0x242a13(0x186)]+_0x242a13(0x15b),'mimetype':_0x242a13(0x170)},{'quoted':_0x170854}),_0x170854['react']('✅️');}catch{try{const _0x1fe0da=await a0_0x29724c(apis+_0x242a13(0x165)+_0x11eb92[_0x242a13(0x167)]),_0x53a931=await _0x1fe0da['json']();await _0x14d5a1['sendMessage'](_0x170854[_0x242a13(0x184)],{'audio':{'url':_0x53a931[_0x242a13(0x16a)][_0x242a13(0x167)]},'fileName':_0x11eb92[_0x242a13(0x186)]+_0x242a13(0x15b),'mimetype':_0x242a13(0x170)},{'quoted':_0x170854}),_0x170854[_0x242a13(0x181)]('✅️');}catch{try{let _0x9aa713=await spotifyxv(_0x263fef);if(!_0x9aa713[_0x242a13(0x179)])throw _0x242a13(0x190);const _0x87e2cb=await a0_0x29724c('https://archive-ui.tanakadomp.biz.id/download/spotify?url='+_0x11eb92[_0x242a13(0x167)]),_0x5740e4=await _0x87e2cb[_0x242a13(0x175)]();await _0x14d5a1[_0x242a13(0x169)](_0x170854[_0x242a13(0x184)],{'audio':{'url':_0x5740e4[_0x242a13(0x17a)]['data']['download']},'fileName':_0x5740e4[_0x242a13(0x17a)][_0x242a13(0x16a)][_0x242a13(0x186)]+_0x242a13(0x15b),'mimetype':'audio/mpeg'},{'quoted':_0x170854}),_0x170854[_0x242a13(0x181)]('✅️');}catch(_0xa9b709){_0x170854['react']('❌'),console['error'](_0xa9b709);}}}};function a0_0x4edc(_0x369ec9,_0x1c166c){const _0x5f0a91=a0_0x5f0a();return a0_0x4edc=function(_0x4edc63,_0x1d40e6){_0x4edc63=_0x4edc63-0x15a;let _0x2b0a52=_0x5f0a91[_0x4edc63];return _0x2b0a52;},a0_0x4edc(_0x369ec9,_0x1c166c);}handler['command']=[a0_0x4c50be(0x163)];export default handler;async function spotifyxv(_0x37a46f){const _0x298601=a0_0x4c50be;let _0x12fd6e=await tokens();try{let _0x1153f9=await a0_0x578c08({'method':'get','url':'https://api.spotify.com/v1/search?q='+encodeURIComponent(_0x37a46f)+'&type=track','headers':{'Authorization':_0x298601(0x185)+_0x12fd6e}});const _0x539304=_0x1153f9['data']['tracks'][_0x298601(0x15a)],_0x4be196=_0x539304[_0x298601(0x16c)](_0x1e6365=>({'name':_0x1e6365[_0x298601(0x17e)],'artist':_0x1e6365[_0x298601(0x172)][_0x298601(0x16c)](_0x24b26f=>_0x24b26f['name'])[_0x298601(0x15e)](',\x20'),'album':_0x1e6365[_0x298601(0x16d)][_0x298601(0x17e)],'duration':timestamp(_0x1e6365['duration_ms']),'url':_0x1e6365[_0x298601(0x188)]['spotify'],'image':_0x1e6365[_0x298601(0x16d)]['images'][_0x298601(0x179)]?_0x1e6365[_0x298601(0x16d)][_0x298601(0x17b)][0x0][_0x298601(0x167)]:''}));return _0x4be196;}catch(_0x46ddb6){return console[_0x298601(0x180)]('Error\x20in\x20spotifyxv:\x20'+_0x46ddb6),[];}}async function tokens(){const _0x41e81d=a0_0x4c50be;try{const _0x8baa5d=await a0_0x578c08({'method':_0x41e81d(0x189),'url':'https://accounts.spotify.com/api/token','headers':{'Content-Type':_0x41e81d(0x18b),'Authorization':_0x41e81d(0x15d)+Buffer[_0x41e81d(0x15c)](_0x41e81d(0x191))[_0x41e81d(0x16f)](_0x41e81d(0x161))},'data':_0x41e81d(0x16e)});return _0x8baa5d['data']['access_token'];}catch(_0x7bba01){console[_0x41e81d(0x180)](_0x41e81d(0x168)+_0x7bba01);throw new Error(_0x41e81d(0x173));}}function timestamp(_0x24803d){const _0x2a99d2=a0_0x4c50be,_0x10ca94=Math[_0x2a99d2(0x17c)](_0x24803d/0xea60),_0x4179d1=Math['floor'](_0x24803d%0xea60/0x3e8);return _0x10ca94+':'+(_0x4179d1<0xa?'0':'')+_0x4179d1;}