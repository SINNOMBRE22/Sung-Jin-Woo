const a0_0x35fe13=a0_0x3baf;(function(_0x2ca532,_0x4b88e2){const _0x1cb8b3=a0_0x3baf,_0x334b3c=_0x2ca532();while(!![]){try{const _0x51707d=-parseInt(_0x1cb8b3(0x126))/0x1+-parseInt(_0x1cb8b3(0x13e))/0x2+parseInt(_0x1cb8b3(0x128))/0x3*(-parseInt(_0x1cb8b3(0x13c))/0x4)+parseInt(_0x1cb8b3(0x130))/0x5*(parseInt(_0x1cb8b3(0x153))/0x6)+parseInt(_0x1cb8b3(0x13f))/0x7+parseInt(_0x1cb8b3(0x12b))/0x8+-parseInt(_0x1cb8b3(0x139))/0x9;if(_0x51707d===_0x4b88e2)break;else _0x334b3c['push'](_0x334b3c['shift']());}catch(_0x26948e){_0x334b3c['push'](_0x334b3c['shift']());}}}(a0_0x53e2,0x74348));import a0_0x7d5385 from'axios';import a0_0x3f0598 from'node-fetch';import a0_0x34966c from'yt-search';let handler=async(_0x27c4dd,{conn:_0x5a8b09,text:_0x1ddb79,usedPrefix:_0x5cc91c,command:_0x2eace6})=>{const _0x5a01b5=a0_0x3baf;if(!_0x1ddb79)throw _0x5a01b5(0x145)+(_0x5cc91c+_0x2eace6)+_0x5a01b5(0x12a);const _0x1e3e66=await a0_0x3f0598(apis+'/search/spotify?q='+encodeURIComponent(_0x1ddb79)),_0xa7a258=await _0x1e3e66['json']();if(!_0xa7a258[_0x5a01b5(0x140)]||_0xa7a258[_0x5a01b5(0x140)][_0x5a01b5(0x14c)]===0x0)throw _0x5a01b5(0x122);const _0x54143f=_0xa7a258[_0x5a01b5(0x140)][0x0];let _0x1ab79e='\x0aTitle:\x20'+_0x54143f[_0x5a01b5(0x124)]+_0x5a01b5(0x144)+_0x54143f['artist']+_0x5a01b5(0x129)+_0x54143f['album']+'\x0aDuration:\x20'+_0x54143f[_0x5a01b5(0x152)]+_0x5a01b5(0x147)+_0x54143f[_0x5a01b5(0x12d)]+_0x5a01b5(0x127);await _0x5a8b09[_0x5a01b5(0x125)](_0x27c4dd[_0x5a01b5(0x146)],{'text':_0x1ab79e,'contextInfo':{'forwardingScore':0x1,'isForwarded':!![],'externalAdReply':{'showAdAttribution':!![],'containsAutoReply':!![],'renderLargerThumbnail':!![],'title':_0x54143f[_0x5a01b5(0x124)],'body':'Spotify\x20Downloader','mediaType':0x1,'thumbnailUrl':_0x54143f[_0x5a01b5(0x132)],'mediaUrl':_0x54143f[_0x5a01b5(0x12d)],'sourceUrl':_0x54143f[_0x5a01b5(0x12d)]}}},{'quoted':_0x27c4dd}),_0x27c4dd[_0x5a01b5(0x137)]('⌛️');try{const _0x477c80=await a0_0x3f0598(_0x5a01b5(0x14b)+_0x54143f[_0x5a01b5(0x12d)]),_0x4dc751=await _0x477c80['json']();await _0x5a8b09[_0x5a01b5(0x125)](_0x27c4dd[_0x5a01b5(0x146)],{'audio':{'url':_0x4dc751[_0x5a01b5(0x140)][_0x5a01b5(0x12c)]},'fileName':_0x54143f['title']+_0x5a01b5(0x134),'mimetype':'audio/mpeg'},{'quoted':_0x27c4dd}),_0x27c4dd[_0x5a01b5(0x137)]('✅️');}catch{try{const _0x5e4a88=await a0_0x3f0598(apis+_0x5a01b5(0x148)+_0x54143f[_0x5a01b5(0x12d)]),_0x565172=await _0x5e4a88['json']();await _0x5a8b09[_0x5a01b5(0x125)](_0x27c4dd[_0x5a01b5(0x146)],{'audio':{'url':_0x565172['data'][_0x5a01b5(0x12d)]},'fileName':_0x54143f[_0x5a01b5(0x124)]+_0x5a01b5(0x134),'mimetype':_0x5a01b5(0x135)},{'quoted':_0x27c4dd}),_0x27c4dd[_0x5a01b5(0x137)]('✅️');}catch{try{let _0x1a2d85=await spotifyxv(_0x1ddb79);if(!_0x1a2d85['length'])throw _0x5a01b5(0x14f);const _0x9dc6a5=await a0_0x3f0598(_0x5a01b5(0x121)+_0x54143f['url']),_0x3b3d09=await _0x9dc6a5['json']();await _0x5a8b09['sendMessage'](_0x27c4dd[_0x5a01b5(0x146)],{'audio':{'url':_0x3b3d09[_0x5a01b5(0x12f)][_0x5a01b5(0x140)]['download']},'fileName':_0x3b3d09[_0x5a01b5(0x12f)][_0x5a01b5(0x140)]['title']+_0x5a01b5(0x134),'mimetype':_0x5a01b5(0x135)},{'quoted':_0x27c4dd}),_0x27c4dd[_0x5a01b5(0x137)]('✅️');}catch(_0x431119){_0x27c4dd[_0x5a01b5(0x137)]('❌'),console['error'](_0x431119);}}}};handler[a0_0x35fe13(0x14d)]=[a0_0x35fe13(0x131)];function a0_0x3baf(_0x50401a,_0x57ad8d){const _0x53e245=a0_0x53e2();return a0_0x3baf=function(_0x3baf33,_0x7732d3){_0x3baf33=_0x3baf33-0x120;let _0x408952=_0x53e245[_0x3baf33];return _0x408952;},a0_0x3baf(_0x50401a,_0x57ad8d);}function a0_0x53e2(){const _0xff4755=['duration','2566890kuguhM','Error\x20in\x20spotifyxv:\x20','error','post','https://archive-ui.tanakadomp.biz.id/download/spotify?url=','⚠️\x20No\x20results\x20found\x20for\x20that\x20query.','external_urls','title','sendMessage','325557ZGYZim','\x0a\x20\x20','404862KnjKql','\x0aAlbum:\x20','\x20<search\x20query>','5708416xYTzJy','download','url','album','result','5FaxMFa','music','image','Basic\x20','.mp3','audio/mpeg','floor','react','base64','142911cUZtSS','access_token','join','8rBAdVs','application/x-www-form-urlencoded','1876900QCbGVN','6190821eHoRIc','data','Error\x20in\x20tokens:\x20','toString','name','\x0aArtist:\x20','Usage:\x20','chat','\x0aLink:\x20','/download/spotifydl?url=','images','https://api.spotify.com/v1/search?q=','https://api.siputzx.my.id/api/d/spotify?url=','length','command','map','❌\x20No\x20results\x20found,\x20please\x20try\x20again.','get','duration_ms'];a0_0x53e2=function(){return _0xff4755;};return a0_0x53e2();}export default handler;async function spotifyxv(_0x56d6ae){const _0x16785e=a0_0x35fe13;let _0x50236a=await tokens();try{let _0x5b3fa7=await a0_0x7d5385({'method':_0x16785e(0x150),'url':_0x16785e(0x14a)+encodeURIComponent(_0x56d6ae)+'&type=track','headers':{'Authorization':'Bearer\x20'+_0x50236a}});const _0x3dd12e=_0x5b3fa7[_0x16785e(0x140)]['tracks']['items'],_0x487656=_0x3dd12e[_0x16785e(0x14e)](_0x21b81d=>({'name':_0x21b81d[_0x16785e(0x143)],'artist':_0x21b81d['artists'][_0x16785e(0x14e)](_0x2e6049=>_0x2e6049[_0x16785e(0x143)])[_0x16785e(0x13b)](',\x20'),'album':_0x21b81d[_0x16785e(0x12e)][_0x16785e(0x143)],'duration':timestamp(_0x21b81d[_0x16785e(0x151)]),'url':_0x21b81d[_0x16785e(0x123)]['spotify'],'image':_0x21b81d[_0x16785e(0x12e)]['images'][_0x16785e(0x14c)]?_0x21b81d[_0x16785e(0x12e)][_0x16785e(0x149)][0x0][_0x16785e(0x12d)]:''}));return _0x487656;}catch(_0x331759){return console['error'](_0x16785e(0x154)+_0x331759),[];}}async function tokens(){const _0x2f74ec=a0_0x35fe13;try{const _0xc552b7=await a0_0x7d5385({'method':_0x2f74ec(0x120),'url':'https://accounts.spotify.com/api/token','headers':{'Content-Type':_0x2f74ec(0x13d),'Authorization':_0x2f74ec(0x133)+Buffer['from']('acc6302297e040aeb6e4ac1fbdfd62c3:0e8439a1280a43aba9a5bc0a16f3f009')[_0x2f74ec(0x142)](_0x2f74ec(0x138))},'data':'grant_type=client_credentials'});return _0xc552b7[_0x2f74ec(0x140)][_0x2f74ec(0x13a)];}catch(_0x136d7d){console[_0x2f74ec(0x155)](_0x2f74ec(0x141)+_0x136d7d);throw new Error('Could\x20not\x20obtain\x20access\x20token');}}function timestamp(_0x28549a){const _0x1eae7f=a0_0x35fe13,_0x348bf2=Math[_0x1eae7f(0x136)](_0x28549a/0xea60),_0x1356ed=Math['floor'](_0x28549a%0xea60/0x3e8);return _0x348bf2+':'+(_0x1356ed<0xa?'0':'')+_0x1356ed;}