const a0_0x1698ba=a0_0xa868;(function(_0x424fd4,_0x11eba0){const _0x52fe0e=a0_0xa868,_0x47c23a=_0x424fd4();while(!![]){try{const _0x534ed2=parseInt(_0x52fe0e(0x14d))/0x1+parseInt(_0x52fe0e(0x136))/0x2*(-parseInt(_0x52fe0e(0x142))/0x3)+parseInt(_0x52fe0e(0x151))/0x4+parseInt(_0x52fe0e(0x128))/0x5+parseInt(_0x52fe0e(0x145))/0x6+-parseInt(_0x52fe0e(0x14e))/0x7*(-parseInt(_0x52fe0e(0x131))/0x8)+parseInt(_0x52fe0e(0x126))/0x9*(-parseInt(_0x52fe0e(0x144))/0xa);if(_0x534ed2===_0x11eba0)break;else _0x47c23a['push'](_0x47c23a['shift']());}catch(_0x1087ce){_0x47c23a['push'](_0x47c23a['shift']());}}}(a0_0x5157,0x1bba7));import a0_0x473ebe from'node-fetch';import a0_0xad5362 from'axios';import a0_0x3a8ea0 from'@vitalets/google-translate-api';import{Configuration,OpenAIApi}from'openai';const configuration=new Configuration({'organization':global[a0_0x1698ba(0x147)],'apiKey':global['openai_key']}),openaiii=new OpenAIApi(configuration),handler=async(_0xbdb634,{conn:_0x218268,text:_0x255912,usedPrefix:_0x59ff57,command:_0x10f34e})=>{const _0x4613ab=a0_0x1698ba,_0x5bd903=global,_0x4cb887=_0x5bd903['db'][_0x4613ab(0x11f)]['users'][_0xbdb634['sender']][_0x4613ab(0x122)],_0x2e1132=JSON[_0x4613ab(0x141)](fs[_0x4613ab(0x12f)](_0x4613ab(0x13b)+_0x4cb887+_0x4613ab(0x134))),_0x5c6593=_0x2e1132[_0x4613ab(0x12b)][_0x4613ab(0x12d)];if(_0x59ff57=='a'||_0x59ff57=='A')return;if(!_0x255912)throw _0x5c6593[_0x4613ab(0x149)][0x0]+'\x20'+(_0x59ff57+_0x10f34e)+'\x20'+_0x5c6593[_0x4613ab(0x149)][0x1]+'\x20'+(_0x59ff57+_0x10f34e)+'\x20'+_0x5c6593[_0x4613ab(0x149)][0x2];try{_0x218268[_0x4613ab(0x13f)]('composing',_0xbdb634[_0x4613ab(0x143)]);let _0x37fde9=_0x5c6593[_0x4613ab(0x129)];async function _0x18e8fb(_0x15c291){const _0x33050b=_0x4613ab,_0x23331a=global['openai_key'];let _0x57ffb8=global[_0x33050b(0x133)]['data'][_0x33050b(0x14a)][_0xbdb634[_0x33050b(0x14c)]];_0x57ffb8[_0x33050b(0x137)]({'role':_0x33050b(0x121),'content':_0x15c291});const _0x2b5666='https://api.openai.com/v1/chat/completions',_0x5461ad={'Content-Type':_0x33050b(0x13e),'Authorization':'Bearer\x20'+_0x23331a},_0x3c2cb2={'model':_0x33050b(0x120),'messages':[{'role':_0x33050b(0x138),'content':_0x37fde9},..._0x57ffb8]},_0x6f43bd=await a0_0x473ebe(_0x2b5666,{'method':'POST','headers':_0x5461ad,'body':JSON[_0x33050b(0x146)](_0x3c2cb2)}),_0x225580=await _0x6f43bd[_0x33050b(0x123)](),_0x212db7=_0x225580['choices'][0x0][_0x33050b(0x140)][_0x33050b(0x14f)];return _0x212db7;};let _0x5bdaa0=await _0x18e8fb(_0x255912);if(_0x5bdaa0==_0x4613ab(0x124)||_0x5bdaa0==''||!_0x5bdaa0)return XD;_0xbdb634[_0x4613ab(0x132)]((''+_0x5bdaa0)[_0x4613ab(0x13d)]());}catch{try{_0x218268['sendPresenceUpdate'](_0x4613ab(0x13c),_0xbdb634[_0x4613ab(0x143)]);const _0x4294d3=await openaiii[_0x4613ab(0x125)]({'model':'text-davinci-003','prompt':_0x255912,'temperature':0.3,'max_tokens':0x1001,'stop':['Ai:',_0x4613ab(0x139)],'top_p':0x1,'frequency_penalty':0.2,'presence_penalty':0x0});if(_0x4294d3[_0x4613ab(0x11f)][_0x4613ab(0x12e)][0x0][_0x4613ab(0x148)]==_0x4613ab(0x124)||_0x4294d3[_0x4613ab(0x11f)][_0x4613ab(0x12e)][0x0][_0x4613ab(0x148)]==''||!_0x4294d3[_0x4613ab(0x11f)]['choices'][0x0][_0x4613ab(0x148)])return XD;_0xbdb634[_0x4613ab(0x132)](_0x4294d3['data']['choices'][0x0][_0x4613ab(0x148)][_0x4613ab(0x13d)]());}catch{try{_0x218268[_0x4613ab(0x13f)]('composing',_0xbdb634[_0x4613ab(0x143)]);const _0x1bcd53=_0x5c6593[_0x4613ab(0x127)],_0x4cc2ab=await a0_0x473ebe(_0x4613ab(0x13a)+_0x255912+_0x4613ab(0x12c)+_0xbdb634[_0x4613ab(0x135)]+_0x4613ab(0x12a)+_0x1bcd53),_0x2893d0=await _0x4cc2ab[_0x4613ab(0x123)]();if(_0x2893d0[_0x4613ab(0x150)]==_0x4613ab(0x124)||_0x2893d0[_0x4613ab(0x150)]==''||!_0x2893d0[_0x4613ab(0x150)])return XD;_0xbdb634[_0x4613ab(0x132)]((''+_0x2893d0[_0x4613ab(0x150)])[_0x4613ab(0x13d)]());}catch{throw _0x5c6593[_0x4613ab(0x130)];}}}};function a0_0x5157(){const _0x53eae6=['trim','application/json','sendPresenceUpdate','message','parse','3777YeMOml','chat','10LWqAKf','1091892FyGHWY','stringify','openai_org_id','text','texto1','users','command','sender','39083DPvjNj','946540ZGQaJZ','content','resultado','198188qtOqIt','data','gpt-3.5-turbo','user','language','json','error','createCompletion','3314862EKENUd','texto3','430665wunJaF','texto2','&prompt=','plugins','&name=','herramientas_chatgpt','choices','readFileSync','texto4','8QCdMdT','reply','chatgpt','.json','name','16zjDUpZ','push','system','Human:','https://api.cafirexos.com/api/chatgpt?text=','./language/','composing'];a0_0x5157=function(){return _0x53eae6;};return a0_0x5157();}function a0_0xa868(_0x5922aa,_0x38b8ed){const _0x515714=a0_0x5157();return a0_0xa868=function(_0xa868df,_0x441ada){_0xa868df=_0xa868df-0x11f;let _0x579c43=_0x515714[_0xa868df];return _0x579c43;},a0_0xa868(_0x5922aa,_0x38b8ed);}handler[a0_0x1698ba(0x14b)]=/^(openai|chatgpt|ia|robot|openai2|chatgpt2|ia2|robot2|Mystic|MysticBot)$/i;export default handler;