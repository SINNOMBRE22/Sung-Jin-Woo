const a0_0x59afbd=a0_0x4151;function a0_0x4151(_0x9e4234,_0x1f1d86){const _0x46f225=a0_0x46f2();return a0_0x4151=function(_0x4151c0,_0x4b4dc5){_0x4151c0=_0x4151c0-0xfe;let _0x366ea0=_0x46f225[_0x4151c0];return _0x366ea0;},a0_0x4151(_0x9e4234,_0x1f1d86);}(function(_0x2c5bd7,_0x5753e2){const _0x1bce82=a0_0x4151,_0x4193be=_0x2c5bd7();while(!![]){try{const _0x226e00=-parseInt(_0x1bce82(0x115))/0x1*(-parseInt(_0x1bce82(0x11f))/0x2)+-parseInt(_0x1bce82(0x120))/0x3*(parseInt(_0x1bce82(0x118))/0x4)+parseInt(_0x1bce82(0xfe))/0x5*(parseInt(_0x1bce82(0x119))/0x6)+parseInt(_0x1bce82(0x116))/0x7+-parseInt(_0x1bce82(0x108))/0x8*(parseInt(_0x1bce82(0x110))/0x9)+parseInt(_0x1bce82(0x10d))/0xa*(parseInt(_0x1bce82(0x10e))/0xb)+-parseInt(_0x1bce82(0x11c))/0xc;if(_0x226e00===_0x5753e2)break;else _0x4193be['push'](_0x4193be['shift']());}catch(_0x2efbe3){_0x4193be['push'](_0x4193be['shift']());}}}(a0_0x46f2,0x4aec8));import a0_0x2bdd32 from'mongoose';const {Schema,connect,model:_model}=a0_0x2bdd32,defaultOptions={'useNewUrlParser':!![],'useUnifiedTopology':!![]};export class mongoDB{constructor(_0x4ada7f,_0x3a0390=defaultOptions){const _0x3b8bf4=a0_0x4151;this[_0x3b8bf4(0x105)]=_0x4ada7f,this[_0x3b8bf4(0x122)]=_0x3a0390,this[_0x3b8bf4(0x10b)]=this[_0x3b8bf4(0x102)]={},this[_0x3b8bf4(0x10a)]={},this['_model']={},this['db']=connect(this[_0x3b8bf4(0x105)],{...this['options']})[_0x3b8bf4(0x104)](console[_0x3b8bf4(0x10f)]);}async['read'](){const _0x503687=a0_0x4151;this[_0x503687(0x125)]=await this['db'];const _0x1c8336=this[_0x503687(0x10a)]=new Schema({'data':{'type':Object,'required':!![],'default':{}}});try{this['_model']=_model(_0x503687(0x10b),_0x1c8336);}catch{this[_0x503687(0x114)]=_model(_0x503687(0x10b));}this[_0x503687(0x102)]=await this[_0x503687(0x114)][_0x503687(0x111)]({});if(!this[_0x503687(0x102)]){this['data']={};const [_0x5e1115,_0x55e1f0]=await Promise[_0x503687(0x124)]([this[_0x503687(0x11b)](this[_0x503687(0x10b)]),this['_model']['findOne']({})]);this[_0x503687(0x102)]=_0x55e1f0;}else this[_0x503687(0x10b)]=this[_0x503687(0x102)]['data'];return this['data'];}[a0_0x59afbd(0x11b)](_0x1e72fe){return new Promise(async(_0x2b630f,_0x415d1c)=>{const _0x4c3327=a0_0x4151;if(!_0x1e72fe)return _0x415d1c(_0x1e72fe);if(!this['_data'])return _0x2b630f(new this[(_0x4c3327(0x114))]({'data':_0x1e72fe})[_0x4c3327(0x126)]());this[_0x4c3327(0x114)]['findById'](this[_0x4c3327(0x102)][_0x4c3327(0x107)],(_0x3d09a9,_0x34fdf3)=>{const _0x3c6ebb=_0x4c3327;if(_0x3d09a9)return _0x415d1c(_0x3d09a9);if(!_0x34fdf3[_0x3c6ebb(0x10b)])_0x34fdf3[_0x3c6ebb(0x10b)]={};return _0x34fdf3[_0x3c6ebb(0x10b)]=_0x1e72fe,this['data']={},_0x34fdf3[_0x3c6ebb(0x126)](_0x2b630f);});});}}export const mongoDBV2=class MongoDBV2{constructor(_0x50984d,_0x1aa68d=defaultOptions){const _0x416a23=a0_0x59afbd;this[_0x416a23(0x105)]=_0x50984d,this[_0x416a23(0x122)]=_0x1aa68d,this[_0x416a23(0x123)]=[],this[_0x416a23(0x10b)]={},this[_0x416a23(0x121)],this[_0x416a23(0x109)],this['db']=connect(this[_0x416a23(0x105)],{...this['options']})[_0x416a23(0x104)](console['error']);}async[a0_0x59afbd(0x113)](){const _0x22f41d=a0_0x59afbd;this[_0x22f41d(0x125)]=await this['db'];const _0x533c9b=new Schema({'data':[{'name':String}]});try{this[_0x22f41d(0x109)]=_model(_0x22f41d(0x121),_0x533c9b);}catch(_0x42b9b7){this['list']=_model('lists');}this[_0x22f41d(0x121)]=await this[_0x22f41d(0x109)]['findOne']({});!lists?.[_0x22f41d(0x10b)]&&(await this[_0x22f41d(0x109)][_0x22f41d(0x100)]({'data':[]}),this[_0x22f41d(0x121)]=await this[_0x22f41d(0x109)]['findOne']({}));const _0x349ae1=[];for(const {name:_0x3a5fc3}of this['lists']['data']){let _0x9b5a51;try{_0x9b5a51=_model(_0x3a5fc3,new Schema({'data':Array}));}catch(_0x53cbf5){console[_0x22f41d(0x10f)](_0x53cbf5);try{_0x9b5a51=_model(_0x3a5fc3);}catch(_0x4d479b){_0x349ae1[_0x22f41d(0xff)](_0x3a5fc3),console['error'](_0x4d479b);}}if(_0x9b5a51){this[_0x22f41d(0x123)][_0x22f41d(0xff)]({'name':_0x3a5fc3,'model':_0x9b5a51});const _0x340d61=await _0x9b5a51[_0x22f41d(0x11e)]({});this['data'][_0x3a5fc3]=Object[_0x22f41d(0x10c)](_0x340d61['map'](_0xdbd4d4=>_0xdbd4d4[_0x22f41d(0x10b)]));}}try{const _0x4d0e17=await this['list'][_0x22f41d(0x103)](this[_0x22f41d(0x121)]['_id']);_0x4d0e17[_0x22f41d(0x10b)]=_0x4d0e17['data']['filter'](_0x185db6=>!_0x349ae1['includes'](_0x185db6[_0x22f41d(0x117)])),await _0x4d0e17['save']();}catch(_0x4b3bf2){console[_0x22f41d(0x10f)](_0x4b3bf2);}return this['data'];}[a0_0x59afbd(0x11b)](_0x211526){return new Promise(async(_0x256d18,_0x5d046e)=>{const _0x5c8e74=a0_0x4151;if(!this[_0x5c8e74(0x121)]||!_0x211526)return _0x5d046e(_0x211526||this[_0x5c8e74(0x121)]);const _0x47e38f=Object[_0x5c8e74(0x11d)](_0x211526),_0x1ee9e3=[];let _0x43762c=0x0;for(const _0x1a2959 of _0x47e38f){if((_0x43762c=this[_0x5c8e74(0x123)]['findIndex'](_0x5e685d=>_0x5e685d[_0x5c8e74(0x117)]===_0x1a2959))!==-0x1){const _0x4adb79=this['models'][_0x43762c][_0x5c8e74(0x106)];await _0x4adb79['deleteMany']()[_0x5c8e74(0x104)](console[_0x5c8e74(0x10f)]),await _0x4adb79[_0x5c8e74(0x112)](Object[_0x5c8e74(0x11a)](_0x211526[_0x1a2959])['map'](_0x4d9da8=>({'data':_0x4d9da8})));if(_0x4adb79&&_0x1a2959)_0x1ee9e3['push']({'name':_0x1a2959});}else{const _0x40f0eb=new Schema({'data':Array});let _0x3105fd;try{_0x3105fd=_model(_0x1a2959,_0x40f0eb);}catch(_0x4c840a){console[_0x5c8e74(0x10f)](_0x4c840a),_0x3105fd=_model(_0x1a2959);}_0x43762c=this[_0x5c8e74(0x123)][_0x5c8e74(0x101)](_0x3aa1ac=>_0x3aa1ac[_0x5c8e74(0x117)]===_0x1a2959),this[_0x5c8e74(0x123)][_0x43762c===-0x1?this[_0x5c8e74(0x123)]['length']:_0x43762c]={'name':_0x1a2959,'model':_0x3105fd},await _0x3105fd[_0x5c8e74(0x112)](Object[_0x5c8e74(0x11a)](_0x211526[_0x1a2959])['map'](_0x4aba00=>({'data':_0x4aba00})));if(_0x3105fd&&_0x1a2959)_0x1ee9e3[_0x5c8e74(0xff)]({'name':_0x1a2959});}}return this['list'][_0x5c8e74(0x103)](this['lists'][_0x5c8e74(0x107)],function(_0x52fa14,_0x24e9da){const _0x2b472f=_0x5c8e74;if(_0x52fa14)return _0x5d046e(_0x52fa14);return _0x24e9da[_0x2b472f(0x10b)]=_0x1ee9e3,this[_0x2b472f(0x10b)]={},_0x24e9da[_0x2b472f(0x126)](_0x256d18);}),_0x256d18(!![]);});}};function a0_0x46f2(){const _0x51e045=['_schema','data','fromEntries','420xSSYZg','150392SdsaFw','error','27SleDeT','findOne','insertMany','read','_model','8khVHsX','492324cznSXm','name','28KSNFJL','96972wQJKHV','entries','write','5789040gVXFzN','keys','find','98696XbiWbZ','7593zcwbMq','lists','options','models','all','conn','save','25sGFmaa','push','create','findIndex','_data','findById','catch','url','model','_id','835000uMQKWJ','list'];a0_0x46f2=function(){return _0x51e045;};return a0_0x46f2();}