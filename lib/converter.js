const a0_0x2a5850=a0_0x5553;(function(_0x4b394b,_0x101d2e){const _0x7a430e=a0_0x5553,_0x3ef8ad=_0x4b394b();while(!![]){try{const _0x1f53f9=-parseInt(_0x7a430e(0xb2))/0x1*(-parseInt(_0x7a430e(0xce))/0x2)+-parseInt(_0x7a430e(0xc0))/0x3*(parseInt(_0x7a430e(0xcd))/0x4)+-parseInt(_0x7a430e(0xd0))/0x5+-parseInt(_0x7a430e(0xb3))/0x6+parseInt(_0x7a430e(0xb7))/0x7*(parseInt(_0x7a430e(0xbb))/0x8)+parseInt(_0x7a430e(0xcc))/0x9+-parseInt(_0x7a430e(0xcb))/0xa;if(_0x1f53f9===_0x101d2e)break;else _0x3ef8ad['push'](_0x3ef8ad['shift']());}catch(_0x592fbd){_0x3ef8ad['push'](_0x3ef8ad['shift']());}}}(a0_0x5c47,0x36e6c));import{promises}from'fs';import{join,dirname}from'path';import{spawn}from'child_process';import{fileURLToPath}from'url';import a0_0x4e1bd1 from'crypto';const __dirname=dirname(fileURLToPath(import.meta[a0_0x2a5850(0xcf)]));function ffmpeg(_0x52e7f7,_0x2d67b8=[],_0x6fbb03='',_0x2e611f=''){return new Promise(async(_0x521fa3,_0x223154)=>{const _0x4209cc=a0_0x5553;try{const _0xe420c2=join(__dirname,'../tmp');await promises[_0x4209cc(0xb1)](_0xe420c2,{'recursive':!![]});const _0x28b976=a0_0x4e1bd1[_0x4209cc(0xd1)](),_0x3d16a5=join(_0xe420c2,_0x28b976+'.'+_0x6fbb03),_0x2a9bee=_0x3d16a5+'.'+_0x2e611f;await promises[_0x4209cc(0xbe)](_0x3d16a5,_0x52e7f7);const _0x52a655=spawn(_0x4209cc(0xb5),['-y','-i',_0x3d16a5,..._0x2d67b8,_0x2a9bee]);_0x52a655['on'](_0x4209cc(0xc4),_0x223154),_0x52a655['on']('close',async _0x568191=>{const _0x46016d=_0x4209cc;try{await promises[_0x46016d(0xaf)](_0x3d16a5);if(_0x568191!==0x0)return _0x223154(new Error(_0x46016d(0xc9)+_0x568191));_0x521fa3({'data':await promises[_0x46016d(0xbd)](_0x2a9bee),'filename':_0x2a9bee,'delete'(){const _0x3a825a=_0x46016d;return promises[_0x3a825a(0xaf)](_0x2a9bee);}});}catch(_0x4e0fec){_0x223154(_0x4e0fec);}});}catch(_0x1e18af){_0x223154(_0x1e18af);}});}function a0_0x5c47(){const _0x5b8035=['128k','66ysWbeT','-vbr','-compression_level','slow','error','libopus','-b:a','-ar','44100','ffmpeg\x20exited\x20with\x20code\x20','-ac','1682980fPUyRJ','3759291IlduWE','6712rYKIHK','799030mNQuiM','url','1743765oMAEAH','randomUUID','64k','aac','unlink','-vn','mkdir','1kbSsAs','356796pEfyKW','-c:a','ffmpeg','48000','7qBNSIk','-crf','ogg','opus','168760mMWIKr','-ab','readFile','writeFile'];a0_0x5c47=function(){return _0x5b8035;};return a0_0x5c47();}function toPTT(_0x32df3a,_0x3556f5){const _0x58edf7=a0_0x2a5850;return ffmpeg(_0x32df3a,[_0x58edf7(0xb0),_0x58edf7(0xca),'1',_0x58edf7(0xc7),_0x58edf7(0xb6),'-c:a','libopus','-b:a',_0x58edf7(0xd2),_0x58edf7(0xc1),'on','-compression_level','10','-f',_0x58edf7(0xba)],_0x3556f5,_0x58edf7(0xb9));}function a0_0x5553(_0x46e6c8,_0x1ec7cf){const _0x5c47f5=a0_0x5c47();return a0_0x5553=function(_0x5553e6,_0x38bbfb){_0x5553e6=_0x5553e6-0xaf;let _0x3a123c=_0x5c47f5[_0x5553e6];return _0x3a123c;},a0_0x5553(_0x46e6c8,_0x1ec7cf);}function toAudio(_0x4bedc4,_0x1b461b){const _0x3d3947=a0_0x2a5850;return ffmpeg(_0x4bedc4,[_0x3d3947(0xb0),_0x3d3947(0xb4),_0x3d3947(0xc5),_0x3d3947(0xc6),'128k','-vbr','on',_0x3d3947(0xc2),'10'],_0x1b461b,_0x3d3947(0xba));}function toVideo(_0x40cfa1,_0x3c4c17){const _0x43eef4=a0_0x2a5850;return ffmpeg(_0x40cfa1,['-c:v','libx264',_0x43eef4(0xb4),_0x43eef4(0xd3),_0x43eef4(0xbc),_0x43eef4(0xbf),_0x43eef4(0xc7),_0x43eef4(0xc8),_0x43eef4(0xb8),'32','-preset',_0x43eef4(0xc3)],_0x3c4c17,'mp4');}export{toAudio,toPTT,toVideo,ffmpeg};