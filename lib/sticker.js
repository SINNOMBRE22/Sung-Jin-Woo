(function(_0x2ee24d,_0x3c9c9a){const _0x53964f=a0_0x31df,_0x234d0a=_0x2ee24d();while(!![]){try{const _0x29a07c=-parseInt(_0x53964f(0x19b))/0x1*(parseInt(_0x53964f(0x18a))/0x2)+-parseInt(_0x53964f(0x1af))/0x3+parseInt(_0x53964f(0x1ac))/0x4*(-parseInt(_0x53964f(0x181))/0x5)+parseInt(_0x53964f(0x199))/0x6+parseInt(_0x53964f(0x1b8))/0x7+-parseInt(_0x53964f(0x18f))/0x8*(parseInt(_0x53964f(0x1cd))/0x9)+parseInt(_0x53964f(0x18e))/0xa*(parseInt(_0x53964f(0x19c))/0xb);if(_0x29a07c===_0x3c9c9a)break;else _0x234d0a['push'](_0x234d0a['shift']());}catch(_0x4f5f7b){_0x234d0a['push'](_0x234d0a['shift']());}}}(a0_0x2ef0,0xa3228));function a0_0x50c4(_0x3ffe89,_0x42c70b){const _0xeb5cb8=a0_0x9ae9();return a0_0x50c4=function(_0x1593ca,_0x317af8){_0x1593ca=_0x1593ca-0xbd;let _0x2ef987=_0xeb5cb8[_0x1593ca];return _0x2ef987;},a0_0x50c4(_0x3ffe89,_0x42c70b);}function a0_0x9ae9(){const _0x5500af=a0_0x31df,_0x26c940=['png',_0x5500af(0x1cb),'format',_0x5500af(0x1ba),_0x5500af(0x1aa),_0x5500af(0x1c1),_0x5500af(0x19a),_0x5500af(0x192),_0x5500af(0x186),'html',_0x5500af(0x1ae),_0x5500af(0x1bc),_0x5500af(0x1bf),'concat',_0x5500af(0x1be),_0x5500af(0x1ca),'../tmp',_0x5500af(0x1a2),_0x5500af(0x18b),_0x5500af(0x1b3),_0x5500af(0x179),_0x5500af(0x1c2),_0x5500af(0x1c4),_0x5500af(0x1ad),_0x5500af(0x197),_0x5500af(0x1b9),_0x5500af(0x1a0),'490TmLwlH',_0x5500af(0x17a),_0x5500af(0x190),_0x5500af(0x1a1),_0x5500af(0x1c9),_0x5500af(0x17b),_0x5500af(0x1b4),_0x5500af(0x182),_0x5500af(0x1cc),'811150hqnTAu','androidAppStoreLink',_0x5500af(0x1b5),_0x5500af(0x1a9),_0x5500af(0x183),_0x5500af(0x1ab),'utf8','application/octet-stream',_0x5500af(0x1c3),_0x5500af(0x198),_0x5500af(0x184),_0x5500af(0x191),_0x5500af(0x1a5),_0x5500af(0x194),_0x5500af(0x1b6),_0x5500af(0x18d),_0x5500af(0x185),_0x5500af(0x193),_0x5500af(0x1a6),'4198980MbNszF',_0x5500af(0x1b2),'2243045InKUaD','readFile',_0x5500af(0x1b7),_0x5500af(0x1a4),'68608lQWRFE','iosAppStoreLink',_0x5500af(0x17e),'toString','stringify',_0x5500af(0x195),_0x5500af(0x1c0),_0x5500af(0x1a7),'toFormat','unlink',_0x5500af(0x1a8),_0x5500af(0x1b0),_0x5500af(0x17f),_0x5500af(0x19e),_0x5500af(0x1bb),_0x5500af(0x19f),_0x5500af(0x18c),_0x5500af(0x187),'scale=512:512:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','exports',_0x5500af(0x17c),_0x5500af(0x1c7),_0x5500af(0x19d),'png:-','isFirstPartySticker',_0x5500af(0x1c5),_0x5500af(0x17d),'accessibilityText'];return a0_0x9ae9=function(){return _0x26c940;},a0_0x9ae9();}const a0_0x4b69ca=a0_0x50c4;function a0_0x31df(_0x51e2cd,_0x1f15ae){const _0x2ef03e=a0_0x2ef0();return a0_0x31df=function(_0x31dfda,_0x444556){_0x31dfda=_0x31dfda-0x179;let _0x574936=_0x2ef03e[_0x31dfda];return _0x574936;},a0_0x31df(_0x51e2cd,_0x1f15ae);}(function(_0x36a97f,_0x34c3fc){const _0x126358=a0_0x31df,_0x5a76e2=a0_0x50c4,_0x5e2a2e=_0x36a97f();while(!![]){try{const _0x1a48c3=parseInt(_0x5a76e2(0xc1))/0x1*(parseInt(_0x5a76e2(0xcc))/0x2)+-parseInt(_0x5a76e2(0xd8))/0x3+-parseInt(_0x5a76e2(0xe7))/0x4+-parseInt(_0x5a76e2(0x105))/0x5*(parseInt(_0x5a76e2(0xeb))/0x6)+parseInt(_0x5a76e2(0x108))/0x7*(parseInt(_0x5a76e2(0xd1))/0x8)+-parseInt(_0x5a76e2(0x10c))/0x9*(-parseInt(_0x5a76e2(0x115))/0xa)+parseInt(_0x5a76e2(0xd0))/0xb;if(_0x1a48c3===_0x34c3fc)break;else _0x5e2a2e['push'](_0x5e2a2e[_0x126358(0x186)]());}catch(_0x1552c8){_0x5e2a2e[_0x126358(0x1b3)](_0x5e2a2e[_0x126358(0x186)]());}}}(a0_0x9ae9,0x8a1e7));const a0_0x3ef826=a0_0x31b7;(function(_0x50acda,_0x5ee0d6){const _0x3bc597=a0_0x50c4,_0x84b025=a0_0x31b7,_0x108d76=_0x50acda();while(!![]){try{const _0x1664ed=parseInt(_0x84b025(0x200))/0x1*(parseInt(_0x84b025(0x1f5))/0x2)+parseInt(_0x84b025(0x1eb))/0x3*(-parseInt(_0x84b025(0x21c))/0x4)+-parseInt(_0x84b025(0x201))/0x5+parseInt(_0x84b025(0x1e0))/0x6+-parseInt(_0x84b025(0x209))/0x7+-parseInt(_0x84b025(0x1f7))/0x8*(-parseInt(_0x84b025(0x1dc))/0x9)+-parseInt(_0x84b025(0x1e9))/0xa*(-parseInt(_0x84b025(0x204))/0xb);if(_0x1664ed===_0x5ee0d6)break;else _0x108d76[_0x3bc597(0x100)](_0x108d76[_0x3bc597(0xf5)]());}catch(_0xdd2f6c){_0x108d76[_0x3bc597(0x100)](_0x108d76[_0x3bc597(0xf5)]());}}}(a0_0x401a,0x6541e));import{dirname}from'path';function a0_0x401a(){const _0x449f7b=a0_0x31df,_0x110e49=a0_0x50c4,_0x50ad52=[_0x110e49(0xcd),_0x110e49(0xe4),_0x449f7b(0x1ce),'chat',_0x110e49(0xd9),'https://api.xteam.xyz/sticker/wm?',_0x110e49(0xe2),_0x110e49(0xc2),_0x110e49(0xbd),'androidAppStoreLink',_0x110e49(0xdb),_0x110e49(0xdf),_0x110e49(0xbf),_0x110e49(0x103),_0x449f7b(0x1a3),_0x110e49(0xdd),_0x110e49(0xe0),_0x110e49(0xca),_0x110e49(0xf7),'24dUPxZq',_0x110e49(0xe3),_0x110e49(0xee),_0x110e49(0xf4),_0x110e49(0xd6),_0x110e49(0xf6),_0x110e49(0xfd),'push',_0x110e49(0x114),_0x110e49(0xd3),_0x110e49(0xc7),_0x110e49(0xe5),_0x110e49(0xf0),'randomBytes',_0x449f7b(0x1bd),_0x110e49(0x10d),_0x110e49(0xc9),_0x449f7b(0x196),_0x449f7b(0x1c5),_0x110e49(0xcb),_0x449f7b(0x1b1),_0x110e49(0x10b),_0x110e49(0xd4),_0x110e49(0xc8),_0x110e49(0xc3),_0x110e49(0xff),_0x110e49(0xfe),_0x110e49(0xed),_0x110e49(0x111),_0x449f7b(0x180),_0x110e49(0xe6),_0x110e49(0xc4),_0x110e49(0xf1),_0x110e49(0xf9),_0x110e49(0xf3),_0x110e49(0xd2),_0x110e49(0xf2),_0x110e49(0xda),_0x110e49(0x10e),_0x110e49(0xfa),_0x110e49(0xdc),_0x110e49(0xec),_0x110e49(0x10f),_0x110e49(0xd5),_0x110e49(0xfc),'ffmpegWebp',_0x110e49(0x110),_0x110e49(0xc0),_0x449f7b(0x1bc),_0x110e49(0x109),_0x110e49(0x102),_0x449f7b(0x1c6),_0x110e49(0xfb),_0x110e49(0xe9),'end',_0x110e49(0xde),_0x449f7b(0x1c8),_0x110e49(0xef),_0x110e49(0x101),_0x110e49(0xc5)];return a0_0x401a=function(){return _0x50ad52;},a0_0x401a();}import{fileURLToPath}from'url';import*as a0_0x33eeef from'fs';import*as a0_0x38a4e3 from'path';import*as a0_0x14e2bc from'crypto';import{ffmpeg}from'./converter.js';import a0_0x219049 from'fluent-ffmpeg';import{spawn}from'child_process';import a0_0x574140 from'./uploadFile.js';import a0_0x31a991 from'./uploadImage.js';import{fileTypeFromBuffer}from'file-type';import a0_0x367a27 from'node-webpmux';import a0_0x124e74 from'node-fetch';const __dirname=dirname(fileURLToPath(import.meta[a0_0x3ef826(0x1d6)])),tmp=a0_0x38a4e3[a0_0x4b69ca(0xff)](__dirname,a0_0x3ef826(0x222));function a0_0x31b7(_0xffc98c,_0x234616){const _0x2c379e=a0_0x401a();return a0_0x31b7=function(_0x1bc6bd,_0x4858d0){_0x1bc6bd=_0x1bc6bd-0x1d6;let _0x26cf35=_0x2c379e[_0x1bc6bd];return _0x26cf35;},a0_0x31b7(_0xffc98c,_0x234616);}function a0_0x2ef0(){const _0xd42c8=['close','packId','text','magick','14891756zzQKDY','hex','templateId','2435469tXnuul','inputFormat','convert','exif','load','11668sNURVx','WEBP','wa-sticker-formatter','2938293cvjiSQ','16BByZuB','addOutputOptions','8Hvuwnr','push','exit','-vcodec','MYSTIC','isAvatarSticker','1133244TDEAoa','stdin','save','Image','promises','buffer','1875505OjpBdR','error','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','libwebp','writeFile','ffmpeg','ext','bin','5573ZZlYCj','139500qkvkUq','toUpperCase','342vgRmpj','webp','stdout','.webp','441BuhKsb','pipe','writeUIntLE','support','5073813zHDngV','.jpeg','6HfeenT','url','status','mime','185zsrLQy','8DpQkPG','232980FPSOfA','reply','webp:-','shift','-vf','input','filter','332EDUNRd','join','from','includes','965480RkicAC','42528KJUKhz','toBuffer','jpeg','../tmp/','stickerMakerSourceType','entries','length','isAiSticker','5573965WKlYwt','50294lCnXIZ','2307504idQfwz','default','8014njDqaa','319uKNnLI','2193060AGJGxb','11RqefiE','data'];a0_0x2ef0=function(){return _0xd42c8;};return a0_0x2ef0();}function sticker2(_0x39b789,_0x5213be){return new Promise(async(_0x5ec8d9,_0xca8775)=>{const _0x422a4b=a0_0x31df,_0x37f6d3=a0_0x50c4,_0x2dbbef=a0_0x31b7;try{if(_0x5213be){const _0x5232d5=await a0_0x124e74(_0x5213be);if(_0x5232d5[_0x37f6d3(0xdd)]!==0xc8)throw await _0x5232d5[_0x37f6d3(0xfe)]();_0x39b789=await _0x5232d5[_0x2dbbef(0x1db)]();}const _0x437c4a=a0_0x38a4e3[_0x37f6d3(0xff)](tmp,+new Date()+_0x2dbbef(0x1d8));await a0_0x33eeef[_0x2dbbef(0x1fd)][_0x2dbbef(0x1ff)](_0x437c4a,_0x39b789);const _0x4e8d4f=spawn(_0x422a4b(0x1c3),['-y','-i',_0x437c4a,_0x422a4b(0x187),_0x2dbbef(0x21d),'-f',_0x2dbbef(0x1e8),'-']);_0x4e8d4f['on'](_0x2dbbef(0x1ee),_0xca8775),_0x4e8d4f['on'](_0x37f6d3(0x107),async()=>{const _0x4e4241=_0x2dbbef;await a0_0x33eeef[_0x4e4241(0x1fd)][_0x4e4241(0x1f2)](_0x437c4a);});const _0x5c80b9=[],[_0x4a57a9,..._0x41205c]=[...module[_0x2dbbef(0x20a)][_0x2dbbef(0x1fe)]['gm']?['gm']:module[_0x37f6d3(0xe4)][_0x2dbbef(0x217)]?[_0x2dbbef(0x217)]:[],_0x2dbbef(0x224),_0x37f6d3(0xe8),_0x2dbbef(0x1e4)],_0x218f93=spawn(_0x4a57a9,_0x41205c);_0x218f93['on'](_0x2dbbef(0x1ee),_0x2d1256=>conn[_0x2dbbef(0x210)](m[_0x2dbbef(0x20c)],util[_0x2dbbef(0x206)](_0x2d1256),m)),_0x218f93[_0x2dbbef(0x21e)]['on'](_0x2dbbef(0x219),_0x51deab=>_0x5c80b9[_0x2dbbef(0x223)](_0x51deab)),_0x4e8d4f[_0x2dbbef(0x21e)][_0x2dbbef(0x20b)](_0x218f93[_0x37f6d3(0x106)]),_0x218f93['on'](_0x2dbbef(0x1f3),()=>{const _0x3bce7f=_0x2dbbef;_0x5ec8d9(Buffer[_0x3bce7f(0x1f4)](_0x5c80b9));});}catch(_0x19faf8){_0xca8775(_0x19faf8);}});}async function sticker3(_0xfaef20,_0x882257,_0x52fde6,_0x3c2cd8){const _0x3b7660=a0_0x3ef826;_0x882257=_0x882257?_0x882257:await a0_0x574140(_0xfaef20);const _0x59880b=await a0_0x124e74(_0x3b7660(0x20e)+new URLSearchParams(Object[_0x3b7660(0x208)]({'url':_0x882257,'packname':_0x52fde6,'author':_0x3c2cd8})));return await _0x59880b[_0x3b7660(0x1db)]();}async function sticker4(_0x467f87,_0x330cfd){const _0x440d71=a0_0x4b69ca,_0x5a537e=a0_0x3ef826;if(_0x330cfd){const _0x45109c=await a0_0x124e74(_0x330cfd);if(_0x45109c[_0x5a537e(0x218)]!==0xc8)throw await _0x45109c[_0x5a537e(0x1e7)]();_0x467f87=await _0x45109c[_0x5a537e(0x1db)]();}return await ffmpeg(_0x467f87,[_0x440d71(0xe2),_0x440d71(0xe3)],_0x5a537e(0x1e5),_0x5a537e(0x1f9));}async function sticker5(_0x332847,_0x50d44e,_0x5c444f,_0x4757e1,_0x1cfb24=[''],_0xbfe547={}){const _0xe1aa6a=a0_0x4b69ca,_0x4b52b0=a0_0x3ef826,{Sticker:_0x4ef67a}=await import(_0x4b52b0(0x21b)),_0x15ec56={'type':_0x4b52b0(0x1ef),'pack':_0x5c444f,'author':_0x4757e1,'categories':_0x1cfb24,..._0xbfe547};return new _0x4ef67a(_0x332847?_0x332847:_0x50d44e,_0x15ec56)[_0xe1aa6a(0x10a)]();}function sticker6(_0x4c3e59,_0x52a9aa){return new Promise(async(_0x2a0e6e,_0x5c63be)=>{const _0x45c9e0=a0_0x31df,_0x38f21a=a0_0x50c4,_0x77c5c8=a0_0x31b7;if(_0x52a9aa){const _0x4f2ef9=await a0_0x124e74(_0x52a9aa);if(_0x4f2ef9[_0x77c5c8(0x218)]!==0xc8)throw await _0x4f2ef9[_0x77c5c8(0x1e7)]();_0x4c3e59=await _0x4f2ef9[_0x77c5c8(0x1db)]();}const _0x473dc1=await fileTypeFromBuffer(_0x4c3e59)||{'mime':_0x77c5c8(0x215),'ext':_0x38f21a(0xea)};if(_0x473dc1[_0x77c5c8(0x216)]==_0x77c5c8(0x1df))_0x5c63be(_0x4c3e59);const _0x187242=a0_0x38a4e3[_0x77c5c8(0x1e6)](__dirname,_0x77c5c8(0x21f)+ +new Date()+'.'+_0x473dc1[_0x77c5c8(0x216)]),_0x9be3fe=a0_0x38a4e3[_0x38f21a(0xff)](_0x187242+_0x77c5c8(0x1fb));await a0_0x33eeef[_0x38f21a(0xf8)][_0x77c5c8(0x1ff)](_0x187242,_0x4c3e59);const _0x20ee8c=/video/i['test'](_0x473dc1[_0x77c5c8(0x1ea)])?a0_0x219049(_0x187242)[_0x77c5c8(0x213)](_0x473dc1[_0x38f21a(0x103)]):a0_0x219049(_0x187242)[_0x45c9e0(0x188)](_0x187242);_0x20ee8c['on'](_0x77c5c8(0x1ee),function(_0x2747a3){const _0x349e33=_0x77c5c8;console[_0x349e33(0x1ee)](_0x2747a3),a0_0x33eeef[_0x349e33(0x1fd)]['unlink'](_0x187242),_0x5c63be(_0x4c3e59);})['on'](_0x77c5c8(0x203),async function(){const _0x968e79=_0x38f21a,_0x1437bb=_0x77c5c8;a0_0x33eeef[_0x1437bb(0x1fd)][_0x1437bb(0x1f2)](_0x187242),_0x2a0e6e(await a0_0x33eeef[_0x1437bb(0x1fd)][_0x968e79(0xce)](_0x9be3fe));})[_0x77c5c8(0x1e1)]([_0x38f21a(0x113),_0x77c5c8(0x1f1),_0x77c5c8(0x20f),_0x38f21a(0xd7)])[_0x77c5c8(0x20d)](_0x45c9e0(0x1ca))[_0x77c5c8(0x1d9)](_0x9be3fe);});}async function addExif(_0x403ae1,_0x1dd456,_0x32f38b,_0x587689=[''],_0x5ae668){const _0x593005=a0_0x4b69ca,_0x322540=a0_0x3ef826,_0x3bc1f0=new a0_0x367a27[(_0x322540(0x214))](),_0x157c87=_0x593005(0xc6)+a0_0x14e2bc[_0x322540(0x1da)](0xc)[_0x322540(0x1e3)](_0x322540(0x1ec))[_0x322540(0x205)](),_0x2c8daf={'sticker-pack-id':_0x5ae668[_0x322540(0x1e2)]?_0x5ae668[_0x593005(0x10b)]:''+_0x157c87,'sticker-pack-name':_0x1dd456?_0x1dd456:undefined,'sticker-pack-publisher':_0x32f38b?_0x32f38b:undefined,'android-app-store-link':_0x5ae668[_0x593005(0x112)]?_0x5ae668[_0x322540(0x212)]:undefined,'ios-app-store-link':_0x5ae668[_0x322540(0x1f0)]?_0x5ae668[_0x322540(0x1f0)]:undefined,'is-ai-sticker':_0x5ae668[_0x322540(0x1de)]?0x1:undefined,'is-first-party-sticker':_0x5ae668[_0x322540(0x202)]?0x1:undefined,'accessibility-text':_0x5ae668[_0x322540(0x1f6)]?_0x5ae668[_0x593005(0xec)]:undefined,'avatar-sticker-template-id':_0x5ae668[_0x322540(0x21a)]?_0x5ae668[_0x322540(0x21a)]:undefined,'is-avatar-sticker':_0x5ae668[_0x593005(0xcf)]?0x1:undefined,'sticker-maker-source-type':_0x5ae668[_0x322540(0x1dd)]?_0x5ae668[_0x593005(0xc9)]:undefined,'emojis':_0x587689?_0x587689:undefined},_0x1e387a=Buffer[_0x593005(0xe1)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3b117b=Buffer[_0x593005(0xe1)](JSON[_0x322540(0x1f8)](_0x2c8daf),_0x593005(0xbe)),_0x2f0924=Buffer['concat']([_0x1e387a,_0x3b117b]);return _0x2f0924[_0x322540(0x207)](_0x3b117b[_0x322540(0x220)],0xe,0x4),await _0x3bc1f0[_0x322540(0x211)](_0x403ae1),_0x3bc1f0[_0x322540(0x1ed)]=_0x2f0924,await _0x3bc1f0[_0x322540(0x1d9)](null);}async function sticker(_0xece713,_0xe3beb2,..._0x12dff4){const _0x147c21=a0_0x31df,_0x53584c=a0_0x4b69ca,_0x312e31=a0_0x3ef826;let _0x2e1e52,_0x5f20b4;for(const _0x3db96d of[sticker3,global[_0x312e31(0x1fe)][_0x312e31(0x1fc)]&&sticker6,sticker5,global[_0x312e31(0x1fe)][_0x53584c(0xc0)]&&global[_0x312e31(0x1fe)][_0x312e31(0x1fa)]&&sticker4,global[_0x312e31(0x1fe)][_0x53584c(0xc0)]&&(global[_0x312e31(0x1fe)][_0x53584c(0x114)]||global[_0x312e31(0x1fe)][_0x312e31(0x217)]||global[_0x312e31(0x1fe)]['gm'])&&sticker2][_0x147c21(0x189)](_0x14a63a=>_0x14a63a)){try{_0x5f20b4=await _0x3db96d(_0xece713,_0xe3beb2,..._0x12dff4);if(_0x5f20b4[_0x312e31(0x1d7)](_0x312e31(0x221)))continue;if(_0x5f20b4[_0x312e31(0x1d7)](_0x53584c(0x104)))try{return await addExif(_0x5f20b4,..._0x12dff4);}catch(_0x2fdd4f){return console[_0x53584c(0xf9)](_0x2fdd4f),_0x5f20b4;}throw _0x5f20b4[_0x312e31(0x1e3)]();}catch(_0x236c7b){_0x2e1e52=_0x236c7b;continue;}}return console[_0x53584c(0xf9)](_0x2e1e52),_0x2e1e52;}const support={'ffmpeg':!![],'ffprobe':!![],'ffmpegWebp':!![],'convert':!![],'magick':![],'gm':![],'find':![]};export{sticker,sticker2,sticker3,sticker4,sticker6,addExif,support};