function a0_0x50c4(_0x2493c4,_0xcfb7ad){const _0x9ae957=a0_0x9ae9();return a0_0x50c4=function(_0x50c471,_0x3bd2ca){_0x50c471=_0x50c471-0xbd;let _0x205ca6=_0x9ae957[_0x50c471];return _0x205ca6;},a0_0x50c4(_0x2493c4,_0xcfb7ad);}function a0_0x9ae9(){const _0x4af09e=['png','stdout','format','save','exif','libwebp','default','../tmp/','shift','html','wa-sticker-formatter','promises','error','concat','1875505OjpBdR','webp','../tmp','text','join','push','writeUIntLE','writeFile','ext','WEBP','5573965WKlYwt','stdin','close','490TmLwlH','support','toBuffer','packId','342vgRmpj','5073813zHDngV','exit','8DpQkPG','.webp','811150hqnTAu','androidAppStoreLink','-vcodec','convert','232980FPSOfA','load','utf8','application/octet-stream','ffmpeg','50294lCnXIZ','reply','jpeg','hex','entries','MYSTIC','includes','webp:-','stickerMakerSourceType','templateId','4198980MbNszF','8Hvuwnr','2243045InKUaD','readFile','isAvatarSticker','14891756zzQKDY','68608lQWRFE','iosAppStoreLink','url','toString','stringify','length','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','2435469tXnuul','toFormat','unlink','inputFormat','16BByZuB','status','11RqefiE','Image','data','from','-vf','scale=512:512:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','exports','.jpeg','139500qkvkUq','2193060AGJGxb','png:-','isFirstPartySticker','bin','6HfeenT','accessibilityText'];a0_0x9ae9=function(){return _0x4af09e;};return a0_0x9ae9();}const a0_0x4b69ca=a0_0x50c4;(function(_0x5d8505,_0x4edbc3){const _0x3df254=a0_0x50c4,_0xa62b3e=_0x5d8505();while(!![]){try{const _0x237708=parseInt(_0x3df254(0xc1))/0x1*(parseInt(_0x3df254(0xcc))/0x2)+-parseInt(_0x3df254(0xd8))/0x3+-parseInt(_0x3df254(0xe7))/0x4+-parseInt(_0x3df254(0x105))/0x5*(parseInt(_0x3df254(0xeb))/0x6)+parseInt(_0x3df254(0x108))/0x7*(parseInt(_0x3df254(0xd1))/0x8)+-parseInt(_0x3df254(0x10c))/0x9*(-parseInt(_0x3df254(0x115))/0xa)+parseInt(_0x3df254(0xd0))/0xb;if(_0x237708===_0x4edbc3)break;else _0xa62b3e['push'](_0xa62b3e['shift']());}catch(_0x53edf4){_0xa62b3e['push'](_0xa62b3e['shift']());}}}(a0_0x9ae9,0x8a1e7));const a0_0x3ef826=a0_0x31b7;(function(_0x72ee10,_0x20ec69){const _0xc5a844=a0_0x50c4,_0x4e0154=a0_0x31b7,_0x347139=_0x72ee10();while(!![]){try{const _0x438f52=parseInt(_0x4e0154(0x200))/0x1*(parseInt(_0x4e0154(0x1f5))/0x2)+parseInt(_0x4e0154(0x1eb))/0x3*(-parseInt(_0x4e0154(0x21c))/0x4)+-parseInt(_0x4e0154(0x201))/0x5+parseInt(_0x4e0154(0x1e0))/0x6+-parseInt(_0x4e0154(0x209))/0x7+-parseInt(_0x4e0154(0x1f7))/0x8*(-parseInt(_0x4e0154(0x1dc))/0x9)+-parseInt(_0x4e0154(0x1e9))/0xa*(-parseInt(_0x4e0154(0x204))/0xb);if(_0x438f52===_0x20ec69)break;else _0x347139[_0xc5a844(0x100)](_0x347139[_0xc5a844(0xf5)]());}catch(_0x107530){_0x347139[_0xc5a844(0x100)](_0x347139[_0xc5a844(0xf5)]());}}}(a0_0x401a,0x6541e));import{dirname}from'path';function a0_0x401a(){const _0x1013e1=a0_0x50c4,_0x3591a7=[_0x1013e1(0xcd),_0x1013e1(0xe4),'pipe','chat',_0x1013e1(0xd9),'https://api.xteam.xyz/sticker/wm?',_0x1013e1(0xe2),_0x1013e1(0xc2),_0x1013e1(0xbd),'androidAppStoreLink',_0x1013e1(0xdb),_0x1013e1(0xdf),_0x1013e1(0xbf),_0x1013e1(0x103),'magick',_0x1013e1(0xdd),_0x1013e1(0xe0),_0x1013e1(0xca),_0x1013e1(0xf7),'24dUPxZq',_0x1013e1(0xe3),_0x1013e1(0xee),_0x1013e1(0xf4),_0x1013e1(0xd6),_0x1013e1(0xf6),_0x1013e1(0xfd),'push',_0x1013e1(0x114),_0x1013e1(0xd3),_0x1013e1(0xc7),_0x1013e1(0xe5),_0x1013e1(0xf0),'randomBytes','buffer',_0x1013e1(0x10d),_0x1013e1(0xc9),'isAiSticker','bin',_0x1013e1(0xcb),'addOutputOptions',_0x1013e1(0x10b),_0x1013e1(0xd4),_0x1013e1(0xc8),_0x1013e1(0xc3),_0x1013e1(0xff),_0x1013e1(0xfe),_0x1013e1(0xed),_0x1013e1(0x111),'mime',_0x1013e1(0xe6),_0x1013e1(0xc4),_0x1013e1(0xf1),_0x1013e1(0xf9),_0x1013e1(0xf3),_0x1013e1(0xd2),_0x1013e1(0xf2),_0x1013e1(0xda),_0x1013e1(0x10e),_0x1013e1(0xfa),_0x1013e1(0xdc),_0x1013e1(0xec),_0x1013e1(0x10f),_0x1013e1(0xd5),_0x1013e1(0xfc),'ffmpegWebp',_0x1013e1(0x110),_0x1013e1(0xc0),'promises',_0x1013e1(0x109),_0x1013e1(0x102),'5573ZZlYCj',_0x1013e1(0xfb),_0x1013e1(0xe9),'end',_0x1013e1(0xde),'toUpperCase',_0x1013e1(0xef),_0x1013e1(0x101),_0x1013e1(0xc5)];return a0_0x401a=function(){return _0x3591a7;},a0_0x401a();}import{fileURLToPath}from'url';import*as a0_0x58ae42 from'fs';import*as a0_0x55ec87 from'path';import*as a0_0x34fbbc from'crypto';import{ffmpeg}from'./converter.js';import a0_0x41d668 from'fluent-ffmpeg';import{spawn}from'child_process';import a0_0x141fc8 from'./uploadFile.js';import a0_0x1cc2c7 from'./uploadImage.js';import{fileTypeFromBuffer}from'file-type';import a0_0x4f5422 from'node-webpmux';import a0_0x40c874 from'node-fetch';const __dirname=dirname(fileURLToPath(import.meta[a0_0x3ef826(0x1d6)])),tmp=a0_0x55ec87[a0_0x4b69ca(0xff)](__dirname,a0_0x3ef826(0x222));function a0_0x31b7(_0x1bce44,_0x2c1003){const _0x4a73e4=a0_0x401a();return a0_0x31b7=function(_0x4dd151,_0x5eb910){_0x4dd151=_0x4dd151-0x1d6;let _0x47987c=_0x4a73e4[_0x4dd151];return _0x47987c;},a0_0x31b7(_0x1bce44,_0x2c1003);}function sticker2(_0x794f01,_0x4b7c06){return new Promise(async(_0x1fc7ba,_0xbf1bc)=>{const _0x5008bc=a0_0x50c4,_0x318c97=a0_0x31b7;try{if(_0x4b7c06){const _0x587ef9=await a0_0x40c874(_0x4b7c06);if(_0x587ef9[_0x5008bc(0xdd)]!==0xc8)throw await _0x587ef9[_0x5008bc(0xfe)]();_0x794f01=await _0x587ef9[_0x318c97(0x1db)]();}const _0x2c02b5=a0_0x55ec87[_0x5008bc(0xff)](tmp,+new Date()+_0x318c97(0x1d8));await a0_0x58ae42[_0x318c97(0x1fd)][_0x318c97(0x1ff)](_0x2c02b5,_0x794f01);const _0x685ba7=spawn('ffmpeg',['-y','-i',_0x2c02b5,'-vf',_0x318c97(0x21d),'-f',_0x318c97(0x1e8),'-']);_0x685ba7['on'](_0x318c97(0x1ee),_0xbf1bc),_0x685ba7['on'](_0x5008bc(0x107),async()=>{const _0x5a1cec=_0x318c97;await a0_0x58ae42[_0x5a1cec(0x1fd)][_0x5a1cec(0x1f2)](_0x2c02b5);});const _0x36fe73=[],[_0x6b4699,..._0x300ecf]=[...module[_0x318c97(0x20a)][_0x318c97(0x1fe)]['gm']?['gm']:module[_0x5008bc(0xe4)][_0x318c97(0x217)]?[_0x318c97(0x217)]:[],_0x318c97(0x224),_0x5008bc(0xe8),_0x318c97(0x1e4)],_0x419c03=spawn(_0x6b4699,_0x300ecf);_0x419c03['on'](_0x318c97(0x1ee),_0x29812c=>conn[_0x318c97(0x210)](m[_0x318c97(0x20c)],util[_0x318c97(0x206)](_0x29812c),m)),_0x419c03[_0x318c97(0x21e)]['on'](_0x318c97(0x219),_0x2e94e0=>_0x36fe73[_0x318c97(0x223)](_0x2e94e0)),_0x685ba7[_0x318c97(0x21e)][_0x318c97(0x20b)](_0x419c03[_0x5008bc(0x106)]),_0x419c03['on'](_0x318c97(0x1f3),()=>{const _0xab62ad=_0x318c97;_0x1fc7ba(Buffer[_0xab62ad(0x1f4)](_0x36fe73));});}catch(_0xdcc12d){_0xbf1bc(_0xdcc12d);}});}async function sticker3(_0x43a0ca,_0x557cfa,_0x4e245c,_0x6555ac){const _0x13de60=a0_0x3ef826;_0x557cfa=_0x557cfa?_0x557cfa:await a0_0x141fc8(_0x43a0ca);const _0x56fec3=await a0_0x40c874(_0x13de60(0x20e)+new URLSearchParams(Object[_0x13de60(0x208)]({'url':_0x557cfa,'packname':_0x4e245c,'author':_0x6555ac})));return await _0x56fec3[_0x13de60(0x1db)]();}async function sticker4(_0x49e966,_0x25dfe4){const _0x6f068=a0_0x4b69ca,_0x468f3c=a0_0x3ef826;if(_0x25dfe4){const _0x409a89=await a0_0x40c874(_0x25dfe4);if(_0x409a89[_0x468f3c(0x218)]!==0xc8)throw await _0x409a89[_0x468f3c(0x1e7)]();_0x49e966=await _0x409a89[_0x468f3c(0x1db)]();}return await ffmpeg(_0x49e966,[_0x6f068(0xe2),_0x6f068(0xe3)],_0x468f3c(0x1e5),_0x468f3c(0x1f9));}async function sticker5(_0x3c8e2d,_0x26f6bb,_0x10d70c,_0x2eb7b2,_0x41c8ac=[''],_0x4040c8={}){const _0x1c04d6=a0_0x4b69ca,_0xf983b8=a0_0x3ef826,{Sticker:_0x557e1a}=await import(_0xf983b8(0x21b)),_0x451761={'type':_0xf983b8(0x1ef),'pack':_0x10d70c,'author':_0x2eb7b2,'categories':_0x41c8ac,..._0x4040c8};return new _0x557e1a(_0x3c8e2d?_0x3c8e2d:_0x26f6bb,_0x451761)[_0x1c04d6(0x10a)]();}function sticker6(_0x3f61c9,_0x331814){return new Promise(async(_0x3aa804,_0xfe6b80)=>{const _0x5330cd=a0_0x50c4,_0x12e138=a0_0x31b7;if(_0x331814){const _0x18f3fd=await a0_0x40c874(_0x331814);if(_0x18f3fd[_0x12e138(0x218)]!==0xc8)throw await _0x18f3fd[_0x12e138(0x1e7)]();_0x3f61c9=await _0x18f3fd[_0x12e138(0x1db)]();}const _0x10fa5c=await fileTypeFromBuffer(_0x3f61c9)||{'mime':_0x12e138(0x215),'ext':_0x5330cd(0xea)};if(_0x10fa5c[_0x12e138(0x216)]==_0x12e138(0x1df))_0xfe6b80(_0x3f61c9);const _0xa3d2ca=a0_0x55ec87[_0x12e138(0x1e6)](__dirname,_0x12e138(0x21f)+ +new Date()+'.'+_0x10fa5c[_0x12e138(0x216)]),_0x24833e=a0_0x55ec87[_0x5330cd(0xff)](_0xa3d2ca+_0x12e138(0x1fb));await a0_0x58ae42[_0x5330cd(0xf8)][_0x12e138(0x1ff)](_0xa3d2ca,_0x3f61c9);const _0x42902a=/video/i['test'](_0x10fa5c[_0x12e138(0x1ea)])?a0_0x41d668(_0xa3d2ca)[_0x12e138(0x213)](_0x10fa5c[_0x5330cd(0x103)]):a0_0x41d668(_0xa3d2ca)['input'](_0xa3d2ca);_0x42902a['on'](_0x12e138(0x1ee),function(_0x2e64d0){const _0x1d3fea=_0x12e138;console[_0x1d3fea(0x1ee)](_0x2e64d0),a0_0x58ae42[_0x1d3fea(0x1fd)]['unlink'](_0xa3d2ca),_0xfe6b80(_0x3f61c9);})['on'](_0x12e138(0x203),async function(){const _0x58d946=_0x5330cd,_0x9a9c8=_0x12e138;a0_0x58ae42[_0x9a9c8(0x1fd)][_0x9a9c8(0x1f2)](_0xa3d2ca),_0x3aa804(await a0_0x58ae42[_0x9a9c8(0x1fd)][_0x58d946(0xce)](_0x24833e));})[_0x12e138(0x1e1)]([_0x5330cd(0x113),_0x12e138(0x1f1),_0x12e138(0x20f),_0x5330cd(0xd7)])[_0x12e138(0x20d)]('webp')[_0x12e138(0x1d9)](_0x24833e);});}async function addExif(_0x1b46e7,_0x47a23e,_0x3e9a66,_0x37d5e8=[''],_0x3c03c2){const _0x1e57a3=a0_0x4b69ca,_0x553e90=a0_0x3ef826,_0x3abb30=new a0_0x4f5422[(_0x553e90(0x214))](),_0x5072ca=_0x1e57a3(0xc6)+a0_0x34fbbc[_0x553e90(0x1da)](0xc)[_0x553e90(0x1e3)](_0x553e90(0x1ec))[_0x553e90(0x205)](),_0x497963={'sticker-pack-id':_0x3c03c2[_0x553e90(0x1e2)]?_0x3c03c2[_0x1e57a3(0x10b)]:''+_0x5072ca,'sticker-pack-name':_0x47a23e?_0x47a23e:undefined,'sticker-pack-publisher':_0x3e9a66?_0x3e9a66:undefined,'android-app-store-link':_0x3c03c2[_0x1e57a3(0x112)]?_0x3c03c2[_0x553e90(0x212)]:undefined,'ios-app-store-link':_0x3c03c2[_0x553e90(0x1f0)]?_0x3c03c2[_0x553e90(0x1f0)]:undefined,'is-ai-sticker':_0x3c03c2[_0x553e90(0x1de)]?0x1:undefined,'is-first-party-sticker':_0x3c03c2[_0x553e90(0x202)]?0x1:undefined,'accessibility-text':_0x3c03c2[_0x553e90(0x1f6)]?_0x3c03c2[_0x1e57a3(0xec)]:undefined,'avatar-sticker-template-id':_0x3c03c2[_0x553e90(0x21a)]?_0x3c03c2[_0x553e90(0x21a)]:undefined,'is-avatar-sticker':_0x3c03c2[_0x1e57a3(0xcf)]?0x1:undefined,'sticker-maker-source-type':_0x3c03c2[_0x553e90(0x1dd)]?_0x3c03c2[_0x1e57a3(0xc9)]:undefined,'emojis':_0x37d5e8?_0x37d5e8:undefined},_0x3b7c21=Buffer[_0x1e57a3(0xe1)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x2c9cac=Buffer[_0x1e57a3(0xe1)](JSON[_0x553e90(0x1f8)](_0x497963),_0x1e57a3(0xbe)),_0x35d55a=Buffer['concat']([_0x3b7c21,_0x2c9cac]);return _0x35d55a[_0x553e90(0x207)](_0x2c9cac[_0x553e90(0x220)],0xe,0x4),await _0x3abb30[_0x553e90(0x211)](_0x1b46e7),_0x3abb30[_0x553e90(0x1ed)]=_0x35d55a,await _0x3abb30[_0x553e90(0x1d9)](null);}async function sticker(_0x4a6d6f,_0x5292c8,..._0x12f554){const _0x267345=a0_0x4b69ca,_0x37fd88=a0_0x3ef826;let _0x10cc8c,_0x37475f;for(const _0xba3077 of[sticker3,global[_0x37fd88(0x1fe)][_0x37fd88(0x1fc)]&&sticker6,sticker5,global[_0x37fd88(0x1fe)][_0x267345(0xc0)]&&global[_0x37fd88(0x1fe)][_0x37fd88(0x1fa)]&&sticker4,global[_0x37fd88(0x1fe)][_0x267345(0xc0)]&&(global[_0x37fd88(0x1fe)][_0x267345(0x114)]||global[_0x37fd88(0x1fe)][_0x37fd88(0x217)]||global[_0x37fd88(0x1fe)]['gm'])&&sticker2]['filter'](_0x4667a9=>_0x4667a9)){try{_0x37475f=await _0xba3077(_0x4a6d6f,_0x5292c8,..._0x12f554);if(_0x37475f[_0x37fd88(0x1d7)](_0x37fd88(0x221)))continue;if(_0x37475f[_0x37fd88(0x1d7)](_0x267345(0x104)))try{return await addExif(_0x37475f,..._0x12f554);}catch(_0x42714c){return console[_0x267345(0xf9)](_0x42714c),_0x37475f;}throw _0x37475f[_0x37fd88(0x1e3)]();}catch(_0x33ed25){_0x10cc8c=_0x33ed25;continue;}}return console[_0x267345(0xf9)](_0x10cc8c),_0x10cc8c;}const support={'ffmpeg':!![],'ffprobe':!![],'ffmpegWebp':!![],'convert':!![],'magick':![],'gm':![],'find':![]};export{sticker,sticker2,sticker3,sticker4,sticker6,addExif,support};